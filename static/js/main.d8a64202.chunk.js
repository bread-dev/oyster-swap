(this["webpackJsonptoken-swap-ui"]=this["webpackJsonptoken-swap-ui"]||[]).push([[0],{1057:function(e,t,n){},1058:function(e,t,n){},1059:function(e,t,n){"use strict";n.r(t);var r=n(4),c=n(0),a=n.n(c),i=n(50),o=n.n(i),s=(n(526),n(527),n(349)),u=n(153),l=n(73),d=n(26),p=n(1060),b=n(1065),f=n(88),j=n(131),m=n(204),h=n(116),v=n(1062),y=n(1061),O=n(178),g=n(70),x=n(18),w=n(495),k=n.n(w),A=n(23),S=n.n(A),N=(n(648),function(e){var t=e.address,n=e.style,a=Object(c.useRef)();return Object(c.useEffect)((function(){t&&a.current&&(a.current.innerHTML="",a.current.className=e.className||"",a.current.appendChild(k()((null===n||void 0===n?void 0:n.width)||16,parseInt(S.a.decode(t).toString("hex").slice(5,15),16))))}),[t,n,e.className]),Object(r.jsx)("div",{className:"identicon-wrapper",ref:a,style:e.style})}),B=n(19),M=n(22),I=function(e){var t=Object(g.c)().wallet,n=Object(B.i)().account;return t&&t.publicKey?Object(r.jsxs)("div",{className:"wallet-wrapper",children:[Object(r.jsxs)("span",{children:[(((null===n||void 0===n?void 0:n.lamports)||0)/M.c).toFixed(6)," SOL"]}),Object(r.jsxs)("div",{className:"wallet-key",children:[Object(x.n)("".concat(t.publicKey)),Object(r.jsx)(N,{address:t.publicKey.toBase58(),style:{marginLeft:"0.5rem"}})]})]}):null},F=function(e){var t=Object(g.c)(),n=t.connected,c=t.wallet,a=Object(l.f)(),i=Object(l.e)();return Object(r.jsxs)("div",{className:"App-Bar",children:[Object(r.jsxs)("div",{className:"App-Bar-left",children:[Object(r.jsx)("div",{className:"App-logo"}),Object(r.jsxs)(O.a,{mode:"horizontal",selectedKeys:[a.pathname],children:[Object(r.jsx)(O.a.Item,{children:Object(r.jsx)(u.b,{to:{pathname:"/"},children:"Swap"})},"/"),Object(r.jsx)(O.a.Item,{children:Object(r.jsx)(u.b,{to:{pathname:"/add"},children:"Pool"})},"/add"),Object(r.jsx)(O.a.Item,{children:Object(r.jsx)(u.b,{to:{pathname:"/info"},children:"Charts"})},"/info"),Object(r.jsx)(O.a.Item,{children:Object(r.jsxs)("a",{href:"https://dex.projectserum.com",target:"_blank",rel:"noopener noreferrer",children:["Trade",Object(r.jsx)("sup",{children:"\u2197"})]})},"trade"),Object(r.jsx)(O.a.Item,{children:Object(r.jsxs)("a",{href:"https://serum-academy.com/en/serum-swap/",target:"_blank",rel:"noopener noreferrer",children:["Help",Object(r.jsx)("sup",{children:"\u2197"})]})},"help")]}),e.left]}),Object(r.jsxs)("div",{className:"App-Bar-right",children:[Object(r.jsx)(I,{}),n&&Object(r.jsx)(f.a,{type:"text",size:"large",onClick:function(){return i.push({pathname:"/pool"})},children:"My Pools"}),Object(r.jsxs)("div",{children:[!n&&Object(r.jsx)(f.a,{type:"text",size:"large",onClick:n?c.disconnect:c.connect,style:{color:"#2abdd2"},children:"Connect"}),n&&Object(r.jsx)(b.a,{placement:"bottomRight",title:"Wallet public key",trigger:"click"})]}),e.right]})]})},T=n(235),C=n(30),q=n(54),P=n(80),E=n(84),L=n(106),K=n(105),W=n(1064),D=function(e){Object(L.a)(n,e);var t=Object(K.a)(n);function n(){var e;Object(P.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).onChange=function(t){var n=t.target.value;(/^-?\d*(\.\d*)?$/.test(n)||""===n||"-"===n)&&e.props.onChange(n)},e.onBlur=function(){var t=e.props,n=t.value,r=t.onBlur,c=t.onChange,a=n;"."!==n.charAt(n.length-1)&&"-"!==n||(a=n.slice(0,-1)),(n.startsWith(".")||n.startsWith("-."))&&(a=a.replace(".","0.")),c(a.replace(/0*(\d+)/,"$1")),r&&r()},e}return Object(E.a)(n,[{key:"render",value:function(){return Object(r.jsx)(W.a,Object(q.a)(Object(q.a)({},this.props),{},{onChange:this.onChange,onBlur:this.onBlur,maxLength:25}))}}]),n}(a.a.Component),z=function(){var e=Object(C.f)(),t=e.slippage,n=e.setSlippage,a=100*t,i=Object(c.useState)(a.toString()),o=Object(d.a)(i,2),s=o[0],u=o[1];Object(c.useEffect)((function(){u(a.toString())}),[t,a]);var l={margin:5};return Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[[.1,.5,1].map((function(e){return Object(r.jsxs)(f.a,{style:l,type:(t=e,t===a?"primary":"default"),onClick:function(){return n(e/100)},children:[e,"%"]},e.toString());var t})),Object(r.jsxs)("div",{style:{padding:"3px 10px 3px 3px",border:"1px solid #434343"},children:[Object(r.jsx)(D,{className:"slippage-input",size:"small",placeholder:s,value:s,style:{width:50,fontSize:14,boxShadow:"none",borderColor:"transparent",outline:"transpaernt"},onChange:function(e){u(e);var t=parseFloat(e)/100;Number.isFinite(t)&&n(t)}}),"%"]})]})},R=function(){var e=Object(g.c)(),t=e.providerUrl,n=e.setProvider,c=Object(C.e)(),a=c.endpoint,i=c.setEndpoint;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{children:["Transactions: Settings:",Object(r.jsxs)("div",{children:["Slippage:",Object(r.jsx)(z,{})]})]}),Object(r.jsxs)("div",{style:{display:"grid"},children:["Network:"," ",Object(r.jsx)(T.a,{onSelect:i,value:a,style:{marginRight:8},children:C.b.map((function(e){var t=e.name,n=e.endpoint;return Object(r.jsx)(T.a.Option,{value:n,children:t},n)}))})]}),Object(r.jsxs)("div",{style:{display:"grid"},children:["Wallet:"," ",Object(r.jsx)(T.a,{onSelect:n,value:t,children:g.a.map((function(e){var t=e.name,n=e.url;return Object(r.jsx)(T.a.Option,{value:n,children:t},n)}))})]})]})},U=n(1070),G=n(1071),V=n(1072),_=function(e){var t=Object(C.e)().tokenMap,n=Object(x.k)(t,e.mintAddress);return n?Object(r.jsx)("img",{alt:"Token icon",className:e.className,width:"20",height:"20",src:n,style:Object(q.a)({marginRight:"0.5rem",marginTop:"0.11rem",borderRadius:"1rem",backgroundColor:"white",backgroundClip:"padding-box"},e.style)},e.mintAddress):Object(r.jsx)(N,{address:e.mintAddress,style:Object(q.a)({marginRight:"0.5rem",display:"flex",alignSelf:"center",width:20,height:20,marginTop:2},e.style)})},Y=function(e){return Object(r.jsxs)("div",{className:e.className,style:{display:"flex"},children:[Object(r.jsx)(_,{mintAddress:e.mintA,style:Object(q.a)({marginRight:"-0.5rem"},e.style)}),Object(r.jsx)(_,{mintAddress:e.mintB})]})},H=(n(385),n(157)),J=n.n(H),Z=n(13),Q=n.n(Z),X=n(20),$=n(32),ee=[],te={},ne=n(138),re=n(283),ce=n(34),ae=new Date("2020-10-27"),ie=18e5,oe=a.a.createContext(null),se=new re.a;function ue(e){var t=e.children,n=void 0===t?null:t,a=Object(C.e)().endpoint,i=Object(B.g)().pools,o=Object(c.useMemo)((function(){return new Map}),[]),s=Object(c.useState)(new Map),u=Object(d.a)(s,2),l=u[0],p=u[1],b=Object(c.useMemo)((function(){return new M.b(a,"recent")}),[a]),f=Object(c.useMemo)((function(){return Object($.a)(new Set(i.map((function(e){return e.pubkeys.holdingMints})).flat()).values()).reduce((function(e,t){var n=t.toBase58(),r=ne.TOKEN_MINTS.find((function(e){return e.address.toBase58()===n})),c=te[n],a="".concat(null===r||void 0===r?void 0:r.name,"/USDC"),i=ne.MARKETS.find((function(e){return e.name===a||e.address.toBase58()===c}));return i&&e.set(n,{marketInfo:i}),e}),new Map)}),[i]);Object(c.useEffect)((function(){var e=0,t=0,n=function(){var t=Object(X.a)(Q.a.mark((function t(){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,be(b,Object($.a)(o.keys()));case 2:se.raiseMarketUpdated(new Set(Object($.a)(f.keys()))),e=window.setTimeout((function(){return n()}),3e4);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r=function(){var e=Object(X.a)(Q.a.mark((function e(){var n,c,a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.fetch("https://serum-api.bonfida.com/pools-recent");case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,a=(null===c||void 0===c?void 0:c.data).reduce((function(e,t){return e.set(t.pool_identifier,t),e}),new Map),p(a),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:t=window.setTimeout((function(){return r()}),ie);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return function(){var e=Object(X.a)(Q.a.mark((function e(){var t,c,a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Map,Object($.a)(f.keys()).forEach((function(e){var n=f.get(e);n&&t.set(n.marketInfo.address.toBase58(),e)})),c=Object($.a)(f.values()).map((function(e){return e.marketInfo.address.toBase58()})),e.next=5,Object(B.e)(b,c.filter((function(e){return void 0===B.c.get(e)})),"single").then((function(e){var n=e.keys,r=e.array;return c.forEach((function(){})),r.map((function(e,r){var c=n[r],a=t.get(c);if(a){var i=f.get(a);if(i){var o=i.marketInfo.programId,s=i.marketInfo.address;B.c.add(s,e,(function(e,t){var n=ne.Market.getLayout(o).decode(t.data),r={pubkey:e,account:Object(q.a)({},t),info:n};return B.c.registerParser(r.info.baseMint,B.b),B.c.registerParser(r.info.quoteMint,B.b),B.c.registerParser(r.info.bids,de),B.c.registerParser(r.info.asks,de),r}))}}return e}))}));case 5:return a=new Set,c.forEach((function(e){var t=B.c.get(e);if(t){var n=t;B.c.get(n.info.baseMint)||a.add(n.info.baseMint.toBase58()),B.c.get(n.info.baseMint)||a.add(n.info.quoteMint.toBase58()),a.add(n.info.bids.toBase58()),a.add(n.info.asks.toBase58())}})),e.next=9,be(b,Object($.a)(a.keys()));case 9:se.raiseMarketUpdated(new Set(Object($.a)(f.keys()))),n(),r();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){window.clearTimeout(t),window.clearTimeout(e)}}),[i,f,o,b]);var j=Object(c.useCallback)((function(e){var t;return pe(null===(t=f.get(e))||void 0===t?void 0:t.marketInfo.address.toBase58(),e)}),[f]),m=Object(c.useCallback)((function(e){var t=f.get(e),n=B.c.get((null===t||void 0===t?void 0:t.marketInfo.address.toBase58())||"");if(!n)return function(){};var r=n.info.bids.toBase58(),c=n.info.asks.toBase58();return o.set(r,(o.get(r)||0)+1),o.set(c,(o.get(c)||0)+1),function(){o.set(r,(o.get(r)||0)-1),o.set(c,(o.get(c)||0)-1),Object($.a)(o.keys()).forEach((function(e){(o.get(e)||0)<=0&&o.delete(e)}))}}),[f,o]);return Object(r.jsx)(oe.Provider,{value:{midPriceInUSD:j,marketEmitter:se,accountsToObserve:o,marketByMint:f,subscribeToMarket:m,dailyVolume:l},children:n})}var le=function(e){var t=Object(c.useContext)(oe),n=Object(C.e)().tokenMap,r=Object(c.useState)([]),a=Object(d.a)(r,2),i=a[0],o=a[1],s=null===t||void 0===t?void 0:t.subscribeToMarket,u=null===t||void 0===t?void 0:t.marketEmitter,l=null===t||void 0===t?void 0:t.marketByMint,p=null===t||void 0===t?void 0:t.dailyVolume;return Object(c.useEffect)((function(){if(u&&s){var t=Object($.a)(new Set(Object($.a)(null===l||void 0===l?void 0:l.keys())).keys()).map((function(e){return s(e)})),r=function(){o(function(e,t,n,r){var c=new Date;if(!t)return[];return e.filter((function(e){return e.pubkeys.holdingMints&&e.pubkeys.holdingMints.length>1})).map((function(e,a){var i,o,s,u,l=(e.pubkeys.holdingMints||[]).map((function(e){return e.toBase58()})).sort(),d=l[0]===(null===(i=e.pubkeys.holdingMints[0])||void 0===i?void 0:i.toBase58())?0:1,p=0===d?1:0,b=B.c.getAccount(e.pubkeys.holdingAccounts[d]),f=B.c.getMint(l[0]),j=B.c.getAccount(e.pubkeys.holdingAccounts[p]),m=B.c.getMint(l[1]),h=pe((null===(o=t.get(l[0]))||void 0===o?void 0:o.marketInfo.address.toBase58())||"",l[0]),v=h*Object(x.d)(b,f),y=pe((null===(s=t.get(l[1]))||void 0===s?void 0:s.marketInfo.address.toBase58())||"",l[1])*Object(x.d)(j,m),O=B.c.getMint(e.pubkeys.mint);if(!(null===O||void 0===O?void 0:O.supply.eqn(0))){var g=function(e,t,n,r){var c=0,a=ee.find((function(t){return t.pool.equals(e.pubkeys.mint)}));a&&(c=a.airdrops.reduce((function(e,c){var a,i=null===(a=t.get(c.mint.toBase58()))||void 0===a?void 0:a.marketInfo.address;if(i){var o=pe(null===i||void 0===i?void 0:i.toBase58(),c.mint.toBase58());e+=c.amount*o/(n+r)*(365/30)}return e}),0));return c}(e,t,v,y),w=0,k=h*((null===n||void 0===n||null===(u=n.get(e.pubkeys.mint.toBase58()))||void 0===u?void 0:u.volume24hA)||0),A=k*(ce.a-ce.c),S=0,N=g,M=g;if(e.pubkeys.feeAccount){var I=B.c.getAccount(e.pubkeys.feeAccount);if(O&&I&&I.info.mint.toBase58()===e.pubkeys.mint.toBase58()){var F=(null===I||void 0===I?void 0:I.info.amount.toNumber())/(null===O||void 0===O?void 0:O.supply.toNumber());if(0!==(S=(w=(F*v+F*y)/4e-4)*ce.a)){var T=F*v/4e-4,C=F*y/4e-4,q=Math.floor((c.getTime()-ae.getTime())/864e5),P=parseFloat(T/q*ce.a*356)/v,E=parseFloat(C/q*ce.a*356)/y;N+=Math.max(P,E),M+=parseFloat(k*ce.a*356)/v}}}var L=B.c.getMint(e.pubkeys.mint),K=Object(x.j)(r,e),W="#/?pair=".concat(Object(x.j)(r,e,!1).replace("/","-"));return{key:e.pubkeys.account.toBase58(),id:a,name:K,names:l.map((function(e){return Object(x.l)(r,e)})),accounts:[null===b||void 0===b?void 0:b.pubkey,null===j||void 0===j?void 0:j.pubkey],address:e.pubkeys.mint.toBase58(),link:W,mints:l,liquidityA:Object(x.d)(b,f),liquidityAinUsd:v,liquidityB:Object(x.d)(j,m),liquidityBinUsd:y,supply:L&&((null===L||void 0===L?void 0:L.supply.toNumber())/Math.pow(10,(null===L||void 0===L?void 0:L.decimals)||0)).toFixed(9),fees:S,fees24h:A,liquidity:v+y,volume:w,volume24h:k,apy:Number.isFinite(N)?N:0,apy24h:Number.isFinite(M)?M:0,map:n,extra:null===n||void 0===n?void 0:n.get(e.pubkeys.account.toBase58()),raw:e}}})).filter((function(e){return void 0!==e}))}(e,l,p,n))},c=u.onMarket(r);return r(),function(){c&&c(),t.forEach((function(e){return e&&e()}))}}}),[n,e,p,s,u,l]),i};var de=function(e,t){var n=ne.Orderbook.LAYOUT.decode(t.data);return{pubkey:e,account:Object(q.a)({},t),info:n}},pe=function(e,t){var n,r,c,a,i=ne.TOKEN_MINTS.find((function(e){return e.address.toBase58()===t}));if(x.a.has((null===i||void 0===i?void 0:i.name)||""))return 1;if(!e)return 0;var o=B.c.get(e);if(!o)return 0;var s=o.info,u=(null===(n=B.c.get(s.baseMint))||void 0===n?void 0:n.info.decimals)||0,l=(null===(r=B.c.get(s.quoteMint))||void 0===r?void 0:r.info.decimals)||0,d=new ne.Market(s,u,l,void 0,s.programId),p=null===(c=B.c.get(s.bids))||void 0===c?void 0:c.info,b=null===(a=B.c.get(s.asks))||void 0===a?void 0:a.info;if(p&&b){var f=new ne.Orderbook(d,p.accountFlags,p.slab),j=new ne.Orderbook(d,b.accountFlags,b.slab),m=f.getL2(1),h=j.getL2(1);if(m.length>0&&h.length>0)return(m[0][0]+h[0][0])/2}return 0},be=function(){var e=Object(X.a)(Q.a.mark((function e(t,n){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",Object(B.e)(t,n,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var r=t[n];return B.c.add(new M.d(r),e)}))})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fe=n(1066),je=n(1067),me=n(155),he=function(e){return Object(r.jsxs)(m.a,{style:Object(q.a)({width:"100%"},e.style),children:[e.label&&Object(r.jsxs)(h.a,{span:4,children:[e.label,":"]}),Object(r.jsx)(h.a,{span:17,children:Object(r.jsx)(me.a,{address:e.address,code:!0,type:"address"})}),Object(r.jsx)(h.a,{span:3,style:{display:"flex"},children:Object(r.jsx)(f.a,{shape:"round",icon:Object(r.jsx)(fe.a,{}),size:"small",style:{marginLeft:"auto",marginRight:0},onClick:function(){return navigator.clipboard.writeText(e.address)}})})]})},ve=function(e){var t=e.pool,n=e.label||"Address";return(null===t||void 0===t?void 0:t.pubkeys.account)?Object(r.jsx)(he,{address:t.pubkeys.account.toBase58(),style:e.style,label:n}):null},ye=function(e){var t,n,c=e.pool,a=Object(C.e)().tokenMap,i=null===c||void 0===c?void 0:c.pubkeys.holdingAccounts[0],o=null===c||void 0===c?void 0:c.pubkeys.holdingAccounts[1],s=null===c||void 0===c?void 0:c.pubkeys.holdingMints[0],u=null===c||void 0===c?void 0:c.pubkeys.holdingMints[1];return s&&(t=Object(x.l)(a,s.toBase58())),u&&(n=Object(x.l)(a,u.toBase58())),Object(r.jsxs)(r.Fragment,{children:[i&&Object(r.jsx)(he,{address:i.toBase58(),style:e.style,label:t}),o&&Object(r.jsx)(he,{address:o.toBase58(),style:e.style,label:n})]})},Oe=function(e){var t=e.pool;return Object(r.jsx)(b.a,{placement:"topRight",title:"Addresses",trigger:"hover",content:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ve,{pool:t,showLabel:!0,label:"Pool"}),Object(r.jsx)(ye,{pool:t})]}),children:Object(r.jsx)(f.a,{shape:"circle",size:"large",type:"text",className:"trade-address-info-button",icon:Object(r.jsx)(je.a,{})})})},ge=n(60),xe=function(e){var t=e.instance,n=t.account,a=t.pool,i=Object(c.useState)(!1),o=Object(d.a)(i,2),s=o[0],u=o[1],l=Object(g.c)().wallet,p=Object(C.d)(),b=function(){var e=Object(X.a)(Q.a.mark((function e(){var t;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),t=n.info.amount.toNumber(),e.next=5,Object(ce.f)(p,l,t,n,a);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Object(ge.a)({description:"Please try again and approve transactions from your wallet",message:"Removing liquidity cancelled.",type:"error"});case 10:return e.prev=10,u(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(f.a,{type:"default",onClick:b,disabled:s,children:"Remove"})})},we=(n(475),function(e){var t=e.pool,n=Object(c.useMemo)((function(){return t?[t]:[]}),[t]),a=le(n),i=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e=i.current;return function(){var t=e&&J.a.getInstanceByDom(e);t&&t.dispose()}}),[]),Object(c.useEffect)((function(){if(i.current&&0!==a.length){var e=J.a.getInstanceByDom(i.current);e||(e=J.a.init(i.current));var t=[{name:a[0].names[0],value:a[0].liquidityAinUsd,tokens:a[0].liquidityA},{name:a[0].names[1],value:a[0].liquidityBinUsd,tokens:a[0].liquidityB}];e.setOption({tooltip:{trigger:"item",formatter:function(e){var t=x.i.format(e.value),n=x.e.format(e.data.tokens);return"".concat(e.name,": \n").concat(t,"\n(").concat(n,")")}},series:[{name:"Liquidity",type:"pie",top:0,bottom:0,left:0,right:0,animation:!1,label:{fontSize:14,show:!0,formatter:function(e){var t=x.i.format(e.value),n=x.e.format(e.data.tokens);return"{c|".concat(e.name,"}\n{r|").concat(n,"}\n{r|").concat(t,"}")},rich:{c:{color:"#999",lineHeight:22,align:"center"},r:{color:"#999",align:"right"}},color:"rgba(255, 255, 255, 0.5)"},itemStyle:{normal:{borderColor:"#000"}},data:t}]})}}),[a]),0===a.length?null:Object(r.jsx)("div",{ref:i,style:{height:150,width:"100%"}})}),ke=n(282),Ae=n(501),Se={volume:"https://serum-api.bonfida.com/pools/volumes",liquidity:"https://serum-api.bonfida.com/pools/liquidity"},Ne=a.a.memo((function(e){var t,n=e.pool,a=e.api,i=e.limit,o=e.chartName,s=e.current,u=Object(c.useRef)(null),l=Object(c.useRef)(null),b=Object(c.useState)(!0),f=Object(d.a)(b,2),j=f[0],m=f[1],h="",v=Object(c.useRef)(0);if(n){var y=n.pubkeys.holdingMints[0].toBase58(),O=n.pubkeys.holdingMints[1].toBase58();h="?mintA=".concat(y,"&mintB=").concat(O)}t=Se[a];var g=Object(c.useCallback)(Object(X.a)(Q.a.mark((function e(){var n,r,c;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.fetch("".concat(t).concat(h));case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,c=(null===r||void 0===r?void 0:r.data)||[],i&&c&&(c=c.slice(0,i)),x(c),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:v.current=window.setTimeout((function(){return g()}),ie);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),[]),x=function(t){m(!1),l.current&&l.current.setOption({textStyle:{color:"#fff"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{containLabel:!0,left:0,right:0},xAxis:[{inverse:!0,type:"category",data:e.getComputedTime(t)}],yAxis:[{type:"value",scale:!0,splitLine:!1}],series:[{type:"".concat(e.type||"line"),data:e.getComputedData(t)}]})};return Object(c.useEffect)((function(){return u.current&&(l.current=J.a.init(u.current)),g(),function(){l.current.dispose(),window.clearTimeout(v.current)}}),[]),Object(r.jsxs)(r.Fragment,{children:[j&&Object(r.jsx)(Ae.a,{tip:"Loading..."}),!j&&Object(r.jsxs)(p.a.Title,{level:4,children:[o," ",s||""]}),Object(r.jsx)("div",{ref:u,style:{height:"250px",width:"100%"}})]})})),Be=a.a.memo((function(e){var t="Volume";return e.current&&(t="Volume (24H)"),Object(r.jsx)(Ne,{pool:e.pool,limit:e.pool?7:0,api:"volume",type:"bar",chartName:t,current:e.current,getComputedData:function(e){return e.map((function(e){return e.volume}))},getComputedTime:function(e){return e.map((function(e){return x.h.format(new Date(e.time))}))}})})),Me=a.a.memo((function(e){var t=function(e){var t,n={},r=Object(ke.a)(e);try{for(r.s();!(t=r.n()).done;){var c=t.value;n[c.time]||(n[c.time]=0),n[c.time]=n[c.time]+c.liquidityAinUsd+c.liquidityBinUsd}}catch(a){r.e(a)}finally{r.f()}return n},n="Liquidity";return e.current&&(n="Total Liquidity"),Object(r.jsx)(Ne,{pool:e.pool,limit:e.pool?7:0,api:"liquidity",type:"line",chartName:n,current:e.current,getComputedData:function(e){var n=t(e);return Object.values(n)},getComputedTime:function(e){var n=t(e);return Object.keys(n).map((function(e){return x.h.format(new Date(parseInt(e)))}))}})})),Ie=n(1068),Fe=n(1069),Te=p.a.Text,Ce=function(e){var t=Object(c.useMemo)((function(){return[e.pool].filter((function(e){return e}))}),[e.pool]),n=Object(c.useState)("card"),a=Object(d.a)(n,2),i=a[0],o=a[1],s=le(t)[0],u=Object(B.j)().userAccounts,l=e.pool,p=e.account,j=l.pubkeys.holdingMints[0].toBase58(),m=l.pubkeys.holdingMints[1].toBase58(),h=Object(B.h)(l.pubkeys.mint),y=((null===p||void 0===p?void 0:p.info.amount.toNumber())||0)/((null===h||void 0===h?void 0:h.supply.toNumber())||0);if(!s)return null;var O={fontSize:11},g=u.length>0&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"pool-card-row",children:[Object(r.jsx)(Te,{type:"secondary",className:"pool-card-cell ",children:"Your liquidity:"}),Object(r.jsx)("div",{className:"pool-card-cell ",children:Object(r.jsxs)("div",{className:"left",children:[Object(r.jsx)("div",{children:x.i.format(y*s.liquidity)}),Object(r.jsx)("div",{children:Object(r.jsxs)(Te,{type:"secondary",style:O,children:[x.e.format(y*s.liquidityA)," ",s.names[0]]})}),Object(r.jsx)("div",{children:Object(r.jsxs)(Te,{type:"secondary",style:O,children:[x.e.format(y*s.liquidityB)," ",s.names[1]]})})]})})]}),Object(r.jsxs)("div",{className:"pool-card-row",children:[Object(r.jsx)(Te,{type:"secondary",className:"pool-card-cell ",children:"Your quantity:"}),Object(r.jsx)("div",{className:"pool-card-cell ",children:y*s.supply})]}),Object(r.jsxs)("div",{className:"pool-card-row",children:[Object(r.jsx)(Te,{type:"secondary",className:"pool-card-cell ",children:"Your fees (24h):"}),Object(r.jsxs)("div",{className:"pool-card-cell ",title:"".concat(s.fees24h*y),children:[s.fees24h*y<.005?"< ":"",x.i.format(s.fees24h*y)]})]}),Object(r.jsx)("hr",{})]});return Object(r.jsx)(v.a,{className:"pool-card",title:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Y,{mintA:j,mintB:m,className:"left-icon"}),null===s||void 0===s?void 0:s.name,Object(r.jsx)(b.a,{placement:"topRight",trigger:"hover",className:"right-icon",content:"Show ".concat("card"===i?"historical":"current"," data"),children:Object(r.jsx)(f.a,{shape:"circle",size:"middle",type:"text",icon:"card"===i?Object(r.jsx)(Ie.a,{}):Object(r.jsx)(Fe.a,{}),onClick:function(){o("card"===i?"chart":"card")}})})]}),children:"card"===i?Object(r.jsxs)(r.Fragment,{children:[g,Object(r.jsxs)("div",{className:"pool-card-row",children:[Object(r.jsx)(Te,{type:"secondary",className:"pool-card-cell ",children:"Pool Liquidity:"}),Object(r.jsx)("div",{className:"pool-card-cell ",children:Object(r.jsxs)("div",{className:"left",children:[Object(r.jsx)("div",{children:x.i.format(s.liquidity)}),Object(r.jsx)("div",{children:Object(r.jsxs)(Te,{type:"secondary",style:O,children:[x.e.format(s.liquidityA)," ",s.names[0]]})}),Object(r.jsx)("div",{children:Object(r.jsxs)(Te,{type:"secondary",style:O,children:[x.e.format(s.liquidityB)," ",s.names[1]]})})]})})]}),Object(r.jsxs)("div",{className:"pool-card-row",children:[Object(r.jsx)(Te,{type:"secondary",className:"pool-card-cell ",children:"LP Supply:"}),Object(r.jsx)("div",{className:"pool-card-cell ",title:s.supply,children:x.e.format(s.supply)})]}),Object(r.jsxs)("div",{className:"pool-card-row",children:[Object(r.jsx)(Te,{type:"secondary",className:"pool-card-cell ",children:"Value per token:"}),Object(r.jsx)("div",{className:"pool-card-cell ",children:x.i.format(s.liquidity/s.supply)})]}),Object(r.jsxs)("div",{className:"pool-card-row",children:[Object(r.jsx)(Te,{type:"secondary",className:"pool-card-cell ",children:"Volume (24h):"}),Object(r.jsx)("div",{className:"pool-card-cell ",children:x.i.format(s.volume24h)})]}),Object(r.jsxs)("div",{className:"pool-card-row",children:[Object(r.jsx)(Te,{type:"secondary",className:"pool-card-cell ",children:"Fees (24h):"}),Object(r.jsx)("div",{className:"pool-card-cell ",children:x.i.format(s.fees24h)})]}),Object(r.jsxs)("div",{className:"pool-card-row",children:[Object(r.jsx)(Te,{type:"secondary",className:"pool-card-cell ",children:"Approx. APY (24h):"}),Object(r.jsx)("div",{className:"pool-card-cell ",children:x.f.format(s.apy24h)})]}),Object(r.jsxs)("div",{className:"pool-card-row",children:[Object(r.jsx)(Te,{type:"secondary",className:"pool-card-cell ",children:"Address:"}),Object(r.jsx)("div",{className:"pool-card-cell ",children:Object(r.jsxs)("div",{className:"left",children:[Object(r.jsx)("div",{children:Object(r.jsx)(me.a,{address:s.address,type:"account",length:4})}),Object(r.jsxs)("div",{className:"small",children:[Object(r.jsx)(me.a,{address:s.accounts[0],type:"account",style:O,length:4}),Object(r.jsxs)(Te,{type:"secondary",style:O,children:[" ",s.names[0]]})]}),Object(r.jsxs)("div",{className:"small",children:[Object(r.jsx)(me.a,{address:s.accounts[1],type:"account",style:O,length:4}),Object(r.jsxs)(Te,{type:"secondary",style:O,children:[" ",s.names[1]]})]})]})})]}),Object(r.jsx)(we,{pool:l}),Object(r.jsx)("div",{className:"pool-card-row",children:e.account&&Object(r.jsx)(xe,{instance:{pool:l,account:e.account}})})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Me,{pool:l,current:x.i.format(s.liquidity)}),Object(r.jsx)(Be,{pool:l,current:x.i.format(s.volume24h)})]})})},qe=n(1063),Pe=n(37),Ee=n(135),Le=(n(981),function(e){var t,n,c=e.item,a=Object(B.h)(c.account.info.mint.toBase58()),i=c.account.info.amount.toNumber()/Math.pow(10,(null===a||void 0===a?void 0:a.decimals)||0),o=(null===a||void 0===a?void 0:a.supply.toNumber())||0,s=c.account.info.amount.toNumber()/o,u=s*(null===(t=e.poolDetails)||void 0===t?void 0:t.liquidity),l=s*(null===(n=e.poolDetails)||void 0===n?void 0:n.fees);if(!i)return null;var d,p=c.pool.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort();return c?Object(r.jsxs)("div",{className:"pool-item-row",title:"LP Token: ".concat(e.item.pool.pubkeys.mint.toBase58(),", account: ").concat(e.item.account.pubkey.toBase58()),children:[Object(r.jsx)(Y,{mintA:p[0],mintB:p[1],style:{marginLeft:"0.5rem"}}),Object(r.jsx)("div",{className:"pool-item-name",children:null===(d=e.poolDetails)||void 0===d?void 0:d.name}),Object(r.jsx)("div",{className:"pool-item-amount",children:x.i.format(u)}),Object(r.jsx)("div",{className:"pool-item-amount",children:x.i.format(l)}),Object(r.jsx)("div",{className:"pool-item-type",title:"Fee account",children:c.isFeeAccount?" (F) ":" "})]}):null}),Ke=function(e){var t=Object(ce.h)(e.legacy),n=Object(c.useMemo)((function(){return t.map((function(e){return e.pool}))}),[t]),a=le(n);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{children:"Your Liquidity"}),Object(r.jsx)(Pe.b,{renderEmpty:function(){return Object(r.jsx)(Ee.a,{image:Ee.a.PRESENTED_IMAGE_SIMPLE,description:"No liquidity found."})},children:Object(r.jsxs)("div",{className:"pools-grid",children:[Object(r.jsxs)("div",{className:"pool-item-header",children:[Object(r.jsx)("div",{style:{width:48}}),Object(r.jsx)("div",{className:"pool-item-name",children:"Pool"}),Object(r.jsx)("div",{className:"pool-item-amount",children:"Liquidity"}),Object(r.jsx)("div",{className:"pool-item-amount",children:"Fees"}),Object(r.jsx)("div",{className:"pool-item-type"}),Object(r.jsx)("div",{})]}),t.map((function(e){return Object(r.jsx)(Le,{item:e,poolDetails:a.find((function(t){return t.raw===e.pool}))},null===e||void 0===e?void 0:e.account.pubkey.toBase58())}))]})})]})},We=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!1),o=Object(d.a)(i,2),s=o[0],u=o[1],l=Object(c.useState)(!1),p=Object(d.a)(l,2),b=p[0],j=p[1],m=Object(c.useState)(!1),h=Object(d.a)(m,2),v=h[0],y=h[1],O=Object(g.c)(),x=O.wallet,w=O.connected,k=Object(C.d)(),A=Object(C.f)().slippage,S=Object(B.g)(),N=Object(ce.h)(!0),M=Object(c.useMemo)((function(){return N.map((function(e){var t=e.account,n=e.pool,r=S.pools.find((function(e){return e.pubkeys.holdingMints[0].equals(n.pubkeys.holdingMints[0])&&e.pubkeys.holdingMints[1].equals(n.pubkeys.holdingMints[1])||e.pubkeys.holdingMints[0].equals(n.pubkeys.holdingMints[1])&&e.pubkeys.holdingMints[1].equals(n.pubkeys.holdingMints[0])}));return{account:t,fromPool:n,toPool:r}})).filter((function(e){return void 0!==e.toPool}))}),[S,N]),I=Object(c.useCallback)(Object(X.a)(Q.a.mark((function e(){var t,n,r,c,a,i,o,s,l,d,p,b,f,m;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(!0),j(!0),t=0;case 3:if(!(t<M.length)){e.next=37;break}return e.prev=4,n=M[t],r=n.account,c=n.fromPool,a=n.toPool,i=r.info.amount.toNumber(),e.next=12,B.c.queryMint(k,c.pubkeys.mint);case 12:return o=e.sent,e.next=15,B.c.queryAccount(k,c.pubkeys.holdingAccounts[0]);case 15:return s=e.sent,e.next=18,B.c.queryAccount(k,c.pubkeys.holdingAccounts[1]);case 18:return l=e.sent,d=i/o.supply.toNumber(),p=Math.floor(s.info.amount.toNumber()*d),b=Math.floor(l.info.amount.toNumber()*d),e.next=24,Object(ce.f)(k,x,i,r,c);case 24:return f=e.sent,c.pubkeys.holdingMints[0].toBase58()===(null===a||void 0===a?void 0:a.pubkeys.holdingMints[0].toBase58())||f.reverse(),m=[{amount:p,account:B.c.getAccount(f[0]),mintAddress:(null===a||void 0===a?void 0:a.pubkeys.holdingMints[0].toBase58())||""},{amount:b,account:B.c.getAccount(f[1]),mintAddress:(null===a||void 0===a?void 0:a.pubkeys.holdingMints[1].toBase58())||""}],e.next=30,Object(ce.d)(k,x,m,A,a);case 30:e.next=34;break;case 32:e.prev=32,e.t0=e.catch(4);case 34:t++,e.next=3;break;case 37:j(!1),y(!0);case 39:case"end":return e.stop()}}),e,null,[[4,32]])}))),[k,x,A,u,M]),F=Object(c.useCallback)((function(){u(!0),b||a(!1)}),[b,a,u]);return Object(c.useEffect)((function(){M.length>0&&!s&&a(!0)}),[M,w,s]),Object(r.jsx)(qe.a,{visible:n,title:"Liquidity migration",onOk:I,onCancel:F,closable:!b,footer:[Object(r.jsx)(f.a,{onClick:F,disabled:b||v,children:"Ask me later"},"back"),Object(r.jsx)(f.a,{type:"primary",loading:b,disabled:v,onClick:I,children:"Migrate"},"submit")],children:v?Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"},children:[Object(r.jsx)("h2",{children:"Congratulations!"}),Object(r.jsx)("div",{children:"Your migration has been successful."}),Object(r.jsx)(f.a,{type:"primary",children:"Close"})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("p",{children:"You are identified as liquidity provider that used v1 of Serum Swap."}),Object(r.jsx)("p",{children:"Please click migrate button to move to new version of the contract"}),Object(r.jsx)("p",{children:"During migration your wallet will ask for multiple approvals."}),Object(r.jsx)(Ke,{legacy:!0})]})})},De=p.a.Text,ze=W.a.Search,Re=function(e){var t=Object(c.useState)(""),n=Object(d.a)(t,2),a=n[0],i=n[1],o=Object(c.useState)(e.val),s=Object(d.a)(o,1)[0];return Object(c.useEffect)((function(){e.val!==s&&(i(e.val>s?"flash-positive":"flash-negative"),setTimeout((function(){return i("")}),200))}),[e.text,e.val,s]),Object(r.jsx)("span",{className:a,children:e.text})},Ue=a.a.memo((function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)((function(){return{liquidity:0,volume:0,fees:0}})),o=Object(d.a)(i,2),s=o[0],u=o[1],l=Object(c.useRef)(null),p=Object(c.useRef)(null),O=Object(ce.j)().pools,g=le(O),w=Object(x.o)("infoDisplayType","Table"),k=Object(d.a)(w,2),A=k[0],S=k[1];Object(c.useEffect)((function(){return l.current&&(p.current=J.a.init(l.current)),function(){p.current.dispose()}}),[]);var N=Object(c.useMemo)((function(){try{return new RegExp(n,"i")}catch(e){}}),[n]),B=Object(c.useCallback)((function(){p.current&&p.current.setOption({series:[{name:"Liquidity",type:"treemap",top:0,bottom:10,left:30,right:30,animation:!1,label:{show:!0,formatter:"{b}"},itemStyle:{normal:{borderColor:"#000"}},breadcrumb:{show:!1},data:g.filter((function(e){return!n||!N||N.test(e.name)})).map((function(e){return{value:e.liquidity,name:e.name,path:"Liquidity/".concat(e.name),data:e}}))}]})}),[g,n,N]);Object(c.useEffect)((function(){u(g.reduce((function(e,t){return e.liquidity=e.liquidity+t.liquidity,e.volume=e.volume+t.volume24h,e.fees=e.fees+t.fees,e}),{liquidity:0,volume:0,fees:0})),B()}),[g,B,n]);var M=[{title:"Name",dataIndex:"name",key:"name",render:function(e,t){return{props:{style:{}},children:Object(r.jsxs)("div",{style:{display:"flex"},children:[Object(r.jsx)(Y,{mintA:t.mints[0],mintB:t.mints[1]}),Object(r.jsx)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",children:e})]})}}},{title:"Liquidity",dataIndex:"liquidity",key:"liquidity",render:function(e,t){return{props:{style:{textAlign:"right"}},children:Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:x.i.format(t.liquidity)}),Object(r.jsx)("div",{children:Object(r.jsxs)(De,{type:"secondary",style:{fontSize:11},children:[x.e.format(t.liquidityA)," ",t.names[0]]})}),Object(r.jsx)("div",{children:Object(r.jsxs)(De,{type:"secondary",style:{fontSize:11},children:[x.e.format(t.liquidityB)," ",t.names[1]]})})]})}},sorter:function(e,t){return e.liquidity-t.liquidity},defaultSortOrder:"descend"},{title:"Supply",dataIndex:"supply",key:"supply",render:function(e,t){return{props:{style:{textAlign:"right"}},children:Object(r.jsx)(Re,{text:e,val:t.supply})}},sorter:function(e,t){return e.supply-t.supply}},{title:"Volume (24h)",dataIndex:"volume",key:"volume",render:function(e,t){return{props:{style:{textAlign:"right"}},children:Object(r.jsx)(Re,{text:x.i.format(t.volume24h),val:t.volume24h})}},sorter:function(e,t){return e.volume24h-t.volume24h}},{title:"Fees (24h)",dataIndex:"fees24h",key:"fees24h",render:function(e,t){return{props:{style:{textAlign:"right"}},children:Object(r.jsx)(Re,{text:x.i.format(t.fees24h),val:t.fees24h})}},sorter:function(e,t){return e.fees24h-t.fees24h}},{title:"APY",dataIndex:"apy",key:"apy",render:function(e,t){return{props:{style:{textAlign:"right"}},children:x.f.format(t.apy)}},sorter:function(e,t){return e.apy-t.apy}},{title:"Address",dataIndex:"address",key:"address",render:function(e,t){return{props:{style:{fontFamily:"monospace"}},children:Object(r.jsx)(ve,{pool:t.raw})}}}];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(F,{right:Object(r.jsx)(b.a,{placement:"topRight",title:"Settings",content:Object(r.jsx)(R,{}),trigger:"click",children:Object(r.jsx)(f.a,{shape:"circle",size:"large",type:"text",icon:Object(r.jsx)(U.a,{})})})}),Object(r.jsxs)("div",{className:"info-header",children:[Object(r.jsx)(ze,{className:"search-input",placeholder:"Filter",type:"search",value:n,onChange:function(e){return a(e.target.value)},onSearch:function(e){return a(e)},style:{width:200}}),Object(r.jsx)(j.a,{title:"Show as table",children:Object(r.jsx)(f.a,{size:"small",type:"Table"===A?"primary":"text",onClick:function(){return S("Table")},icon:Object(r.jsx)(G.a,{})})}),Object(r.jsx)(j.a,{title:"Show as cards",children:Object(r.jsx)(f.a,{size:"small",type:"Card"===A?"primary":"text",onClick:function(){return S("Card")},icon:Object(r.jsx)(V.a,{})})})]}),Object(r.jsxs)(m.a,{gutter:16,style:{padding:"0px 30px",margin:"30px 0px"},children:[Object(r.jsx)(h.a,{span:12,children:Object(r.jsx)(v.a,{children:Object(r.jsx)(Me,{current:x.i.format(s.liquidity)})})}),Object(r.jsx)(h.a,{span:12,children:Object(r.jsx)(v.a,{children:Object(r.jsx)(Be,{current:x.i.format(s.volume)})})})]}),Object(r.jsx)("div",{ref:l,style:{height:"250px",width:"100%"}}),"Table"===A?Object(r.jsx)(y.a,{dataSource:g.filter((function(e){return!n||!N||N.test(e.name)})),columns:M,size:"small",pagination:{pageSize:10}}):Object(r.jsx)("div",{className:"pool-grid",children:g.sort((function(e,t){return t.liquidity-e.liquidity})).map((function(e){return Object(r.jsx)(Ce,{pool:e.raw})}))}),Object(r.jsx)(We,{})]})})),Ge=a.a.createContext(null),Ve=function(e){var t=Object(C.e)().tokenMap,n=Object(c.useState)(""),r=Object(d.a)(n,2),a=r[0],i=r[1],o=Object(c.useState)(e||""),s=Object(d.a)(o,2),u=s[0],l=s[1],p=Object(B.f)(u),b=Object(B.h)(u);return Object(c.useMemo)((function(){return{mintAddress:u,account:p,mint:b,amount:a,name:Object(x.l)(t,u),icon:Object(x.k)(t,u),setAmount:i,setMint:l,convertAmount:function(){return function(e,t){return parseFloat(e)*Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0)}(a,b)},sufficientBalance:function(){return void 0!==p&&Object(x.d)(p,b)>=parseFloat(a)}}}),[u,p,b,a,t,i,l])};function _e(e){var t=e.children,n=void 0===t?null:t,a=Object(C.d)(),i=Object(C.e)().tokens,o=Object(l.e)(),s=Object(l.f)(),u=Object(c.useState)(""),p=Object(d.a)(u,2),b=p[0],f=p[1],j=Object(c.useState)(ce.b.Add),m=Object(d.a)(j,2),h=m[0],v=m[1],y=Ve(),O=y.mintAddress,g=y.setMint,x=y.amount,w=y.setAmount,k=Ve(),A=k.mintAddress,S=k.setMint,N=k.amount,B=k.setAmount,M=Object(ce.i)([y.mintAddress,k.mintAddress]);Object(c.useEffect)((function(){var e,t,n=(null===(e=i.find((function(e){return e.mintAddress===O})))||void 0===e?void 0:e.tokenSymbol)||O,r=(null===(t=i.find((function(e){return e.mintAddress===A})))||void 0===t?void 0:t.tokenSymbol)||A;document.title="Swap | Serum (".concat(n,"/").concat(r,")")}),[O,A,i,s]),Object(c.useEffect)((function(){var e,t,n=(null===(e=i.find((function(e){return e.mintAddress===O})))||void 0===e?void 0:e.tokenSymbol)||O,r=(null===(t=i.find((function(e){return e.mintAddress===A})))||void 0===t?void 0:t.tokenSymbol)||A;if(n&&r&&s.pathname.indexOf("info")<0)o.push({search:"?pair=".concat(n,"-").concat(r)});else{if(!O||!A)return;o.push({search:""})}}),[O,A,i,o,s.pathname]),Object(c.useEffect)((function(){var e,t;if(s.search||!O||!A){var n=function(e,t){var n="SOL",r="USDC",c=e.reduce((function(e,t){return e.set(t.tokenSymbol,t),e}),new Map);if(t){var a=new URLSearchParams(t).get("pair");if(a){var i=a.split("-");i.length>1&&((c.has(i[0])||He(i[0]))&&(n=i[0]),(c.has(i[1])||He(i[1]))&&(r=i[1]))}}return{defaultBase:n,defaultQuote:r}}(i,s.search),r=n.defaultBase,c=n.defaultQuote;r&&c&&(g((null===(e=i.find((function(e){return e.tokenSymbol===r})))||void 0===e?void 0:e.mintAddress)||(He(r)?r:"")||""),S((null===(t=i.find((function(e){return e.tokenSymbol===c})))||void 0===t?void 0:t.mintAddress)||(He(c)?c:"")||""))}}),[s,s.search,g,S,i]);var I=Object(c.useCallback)(Object(X.a)(Q.a.mark((function e(){var t,n,r,c;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(M&&O&&A)){e.next=6;break}return b===O?(r=O,t=B,n=parseFloat(x)):(r=A,t=w,n=parseFloat(N)),e.next=4,Object(ce.e)(a,r,n,M,h);case 4:"string"===typeof(c=e.sent)?t(c):void 0!==c&&Number.isFinite(c)?t(c.toFixed(6)):t("");case 6:case"end":return e.stop()}}),e)}))),[M,O,A,w,B,x,N,a,b,h]);return Object(c.useEffect)((function(){I()}),[N,x,b,I]),Object(r.jsx)(Ge.Provider,{value:{A:y,B:k,lastTypedAccount:b,setLastTypedAccount:f,setPoolOperation:v},children:n})}var Ye=function(){return Object(c.useContext)(Ge)},He=function(e){try{return 32===S.a.decode(e).length}catch(t){return!1}};var Je=function(){var e=Object(ce.h)(),t=Object(g.c)().connected;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(F,{right:Object(r.jsx)(b.a,{placement:"topRight",title:"Settings",content:Object(r.jsx)(R,{}),trigger:"click",children:Object(r.jsx)(f.a,{shape:"circle",size:"large",type:"text",icon:Object(r.jsx)(U.a,{})})})}),Object(r.jsxs)("div",{className:"pool-grid",children:[e.map((function(e){return Object(r.jsx)(Ce,{pool:e.pool,account:e.account},e.pool.pubkeys.account.toBase58())})),!t&&Object(r.jsx)("h3",{children:"Connect to a wallet to view your liquidity."})]}),Object(r.jsx)(We,{})]})},Ze=(n(1057),T.a.Option),Qe=function(e){var t=e.showBalance,n=e.mintAddress,c=e.name,a=e.icon,i=Object(B.h)(n),o=Object(B.f)(n),s=0,u=!1;return t&&o&&i&&(u=(s=o.info.amount.toNumber()/Math.pow(10,i.decimals))>0),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{title:n,style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[a||Object(r.jsx)(_,{mintAddress:n}),c]}),t?Object(r.jsxs)("span",{title:s.toString(),className:"token-balance",children:["\xa0"," ",u&&s<.001?"<0.001":s.toFixed(3)]},n):null]},n)})},Xe=function(e){var t=Object(B.j)().userAccounts,n=Object(B.g)().pools,c=Object(B.h)(e.mint),a=Object(C.e)(),i=a.tokens,o=a.tokenMap,s=i.map((function(e){return Object(r.jsx)(Ze,{value:e.mintAddress,name:e.tokenSymbol,title:e.mintAddress,children:Object(r.jsx)(Qe,{name:e.tokenSymbol,mintAddress:e.mintAddress,showBalance:!0},e.mintAddress)},e.mintAddress)})),u=t.sort((function(e,t){return t.info.amount.toNumber()-e.info.amount.toNumber()})).reduce((function(e,t){var r=t.info.mint.toBase58();if(Object(x.m)(o,r))return e;var c=n.find((function(e){return e&&e.pubkeys.mint.toBase58()===r}));return e.set(r,(e.get(r)||[]).concat([{account:t,pool:c}])),e}),new Map),l=Object($.a)(u.keys());i.findIndex((function(t){return t.mintAddress===e.mint}))<0&&e.mint&&!u.has(null===e||void 0===e?void 0:e.mint)&&l.push(e.mint);var d=l.map((function(e){var t,n,c,a=u.get(e);a&&a.length>0&&(t=a[0].pool);if(t){n=Object(x.j)(o,t);var i=t.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort();c=Object(r.jsx)(Y,{mintA:i[0],mintB:i[1]})}else n=Object(x.l)(o,e,!0,3),c=Object(r.jsx)(_,{mintAddress:e});return Object(r.jsx)(Ze,{value:e,name:n,children:Object(r.jsx)(Qe,{mintAddress:e,name:n,icon:c,showBalance:!t},e)},e)})),p=function(){var n=null===t||void 0===t?void 0:t.find((function(t){return t.info.mint.toBase58()===e.mint}));return n&&c?n.info.amount.toNumber()/Math.pow(10,c.decimals):0};return Object(r.jsxs)(v.a,{className:"ccy-input",style:{borderRadius:20},bodyStyle:{padding:0},children:[Object(r.jsxs)("div",{className:"ccy-input-header",children:[Object(r.jsx)("div",{className:"ccy-input-header-left",children:e.title}),Object(r.jsxs)("div",{className:"ccy-input-header-right",onClick:function(t){return e.onInputChange&&e.onInputChange(p())},children:["Balance: ",p().toFixed(6)]})]}),Object(r.jsxs)("div",{className:"ccy-input-header",style:{padding:"0px 10px 5px 7px"},children:[Object(r.jsx)(D,{value:e.amount,onChange:function(t){e.onInputChange&&e.onInputChange(t)},style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transpaernt"},placeholder:"0.00"}),Object(r.jsx)("div",{className:"ccy-input-header-right",style:{display:"felx"},children:Object(r.jsx)(T.a,{size:"large",showSearch:!0,style:{minWidth:150},placeholder:"CCY",value:e.mint,onChange:function(t){e.onMintChange&&e.onMintChange(t)},filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0},children:[].concat(Object($.a)(s),Object($.a)(d))})})]})]})},$e=n(1073),et=n(1074),tt="Create Liquidity Pool",nt=function(e){return"Insufficient ".concat(e," funds")},rt="Connect Wallet",ct="Select a token",at="Enter an amount",it=function(e,t,n,r,c){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return t?r.mintAddress?r.amount?c.mintAddress?c.amount?r.sufficientBalance()?a||c.sufficientBalance()?e:nt(Object(x.l)(n,c.mintAddress)):nt(Object(x.l)(n,r.mintAddress)):at:ct:at:ct:rt},ot=(n(1058),p.a.Text),st=function(){var e,t,n=Object(g.c)(),a=n.wallet,i=n.connected,o=Object(C.d)(),s=Object(c.useState)(!1),u=Object(d.a)(s,2),l=u[0],p=u[1],b=Ye(),j=b.A,m=b.B,h=b.setLastTypedAccount,v=b.setPoolOperation,y=Object(ce.i)([null===j||void 0===j?void 0:j.mintAddress,null===m||void 0===m?void 0:m.mintAddress]),O=Object(C.f)().slippage,w=Object(C.e)().tokenMap,k=function(){var e=Object(X.a)(Q.a.mark((function e(){var t;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j.account||!m.mintAddress){e.next=14;break}return e.prev=1,p(!0),t=[{account:j.account,mintAddress:j.mintAddress,amount:j.convertAmount()},{mintAddress:m.mintAddress,amount:m.convertAmount()}],e.next=6,Object(ce.g)(o,a,t,O,y);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Object(ge.a)({description:"Please try again and approve transactions from your wallet",message:"Swap trade cancelled.",type:"error"});case 11:return e.prev=11,p(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"input-card",children:[Object(r.jsx)(Oe,{pool:y}),Object(r.jsx)(Xe,{title:"Input",onInputChange:function(e){v(ce.b.SwapGivenInput),j.amount!==e&&h(j.mintAddress),j.setAmount(e)},amount:j.amount,mint:j.mintAddress,onMintChange:function(e){j.setMint(e)}}),Object(r.jsx)(f.a,{type:"primary",className:"swap-button",onClick:function(){var e=j.mintAddress,t=j.amount;j.setMint(m.mintAddress),j.setAmount(m.amount),m.setMint(e),m.setAmount(t),v((function(e){switch(+e){case ce.b.SwapGivenInput:return ce.b.SwapGivenProceeds;case ce.b.SwapGivenProceeds:case ce.b.Add:return ce.b.SwapGivenInput}}))},children:"\u21c5"}),Object(r.jsx)(Xe,{title:"To (Estimate)",onInputChange:function(e){v(ce.b.SwapGivenProceeds),m.amount!==e&&h(m.mintAddress),m.setAmount(e)},amount:m.amount,mint:m.mintAddress,onMintChange:function(e){m.setMint(e)}})]}),Object(r.jsx)(f.a,{className:"trade-button",type:"primary",size:"large",loading:l,onClick:i?k:a.connect,style:{width:"100%"},disabled:i&&(l||!j.account||!m.mintAddress||j.account===m.account||!j.sufficientBalance()||!y),children:it(y?"Swap":(e=Object(x.l)(w,j.mintAddress),t=Object(x.l)(w,m.mintAddress),"Pool ".concat(e,"/").concat(t," doesn't exsist")),i,w,j,m,!0)}),Object(r.jsx)(ut,{pool:y})]})},ut=function(e){var t=Ye(),n=t.A,a=t.B,i=e.pool,o=Object(C.f)().slippage,s=Object(c.useMemo)((function(){return i?[i]:[]}),[i]),u=le(s),l=Object(c.useState)(0),p=Object(d.a)(l,2),j=p[0],m=p[1],h=Object(c.useState)(0),v=Object(d.a)(h,2),y=v[0],O=v[1],g=Object(c.useState)(0),w=Object(d.a)(g,2),k=w[0],A=w[1],S=Object(c.useState)(0),N=Object(d.a)(S,2),B=N[0],M=N[1],I=Object(c.useState)(""),F=Object(d.a)(I,2),T=F[0],q=F[1];Object(c.useEffect)((function(){if(i&&0!==u.length){if(a.amount){var e=parseFloat(null===a||void 0===a?void 0:a.amount)*(1-o);m(e)}var t=u[0].liquidityA/u[0].liquidityB,r=n.mintAddress===u[0].mints[0]?n:a,c=r.mintAddress===n.mintAddress?a:n,s=parseFloat(r.amount)/parseFloat(c.amount);O(Math.abs(100-100*s/t));var l=(parseFloat(n.amount)*ce.a).toFixed(6);A(parseFloat(l)),T===a.mintAddress?M(parseFloat(a.amount)/parseFloat(n.amount)):M(parseFloat(n.amount)/parseFloat(a.amount))}}),[n,a,o,i,u,T]);return parseFloat(a.amount)?Object(r.jsxs)("div",{className:"pool-card",style:{width:"initial"},children:[Object(r.jsxs)("div",{className:"pool-card-row",children:[Object(r.jsx)(ot,{className:"pool-card-cell",children:"Price"}),Object(r.jsx)("div",{className:"pool-card-cell ",title:B.toString(),children:Object(r.jsxs)(f.a,{shape:"circle",size:"middle",type:"text",icon:Object(r.jsx)($e.a,{}),onClick:function(){T!==a.mintAddress?q(a.mintAddress):q(n.mintAddress)},children:[B.toFixed(6),"\xa0",T===a.mintAddress?a.name:n.name," per\xa0",T===a.mintAddress?n.name:a.name,"\xa0"]})})]}),Object(r.jsxs)("div",{className:"pool-card-row",children:[Object(r.jsx)(ot,{className:"pool-card-cell",children:Object(r.jsxs)(b.a,{trigger:"hover",content:Object(r.jsx)("div",{style:{width:300},children:"You transaction will revert if there is a large, unfavorable price movement before it is confirmed."}),children:["Minimun Received ",Object(r.jsx)(et.a,{})]})}),Object(r.jsxs)("div",{className:"pool-card-cell ",title:j.toString(),children:[j.toFixed(6)," ",a.name]})]}),Object(r.jsxs)("div",{className:"pool-card-row",children:[Object(r.jsx)(ot,{className:"pool-card-cell",children:Object(r.jsxs)(b.a,{trigger:"hover",content:Object(r.jsx)("div",{style:{width:300},children:"The difference between the market price and estimated price due to trade size."}),children:["Price Impact ",Object(r.jsx)(et.a,{})]})}),Object(r.jsx)("div",{className:"pool-card-cell ",title:y.toString(),style:{color:Object(x.c)(y)},children:y<.01?"< 0.01%":y.toFixed(3)+"%"})]}),Object(r.jsxs)("div",{className:"pool-card-row",children:[Object(r.jsx)(ot,{className:"pool-card-cell",children:Object(r.jsxs)(b.a,{trigger:"hover",content:Object(r.jsxs)("div",{style:{width:300},children:["A portion of each trade (",100*ce.a,"%) goes to liquidity providers as a protocol incentive."]}),children:["Liquidity Provider Fee ",Object(r.jsx)(et.a,{})]})}),Object(r.jsxs)("div",{className:"pool-card-cell ",title:k.toString(),children:[k," ",n.name]})]})]}):null},lt=n(288),dt=n(1075),pt=(n(485),T.a.Option),bt=1e4,ft=function(e){var t=Object(c.useState)((e.numerator/e.denominator*100).toString()),n=Object(d.a)(t,2),a=n[0],i=n[1];return Object(r.jsxs)("div",{style:{padding:"3px 10px 3px 3px",border:"1px solid #434343"},children:[Object(r.jsx)(D,{className:"slippage-input",size:"small",value:a,style:{width:50,fontSize:14,boxShadow:"none",borderColor:"transparent",outline:"transpaernt"},onChange:function(t){i(t);var n=parseFloat(t);if(Number.isFinite(n)){var r=n*bt/100;e.set(r,bt)}}}),"%"]})},jt=function(e){var t=e.options,n=t.tradeFeeNumerator,c=t.tradeFeeDenominator,a=t.ownerTradeFeeNumerator,i=t.ownerTradeFeeDenominator,o=t.ownerWithdrawFeeNumerator,s=t.ownerWithdrawFeeDenominator;return Object(r.jsx)(v.a,{title:"Pool configuration",children:Object(r.jsxs)("div",{className:"pool-settings-grid",children:[Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{children:"LPs Trading Fee:"}),Object(r.jsx)(ft,{numerator:n,denominator:c,set:function(t,n){return e.setOptions(Object(q.a)(Object(q.a)({},e.options),{},{tradeFeeNumerator:t,tradeFeeDenominator:n}))}})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{children:"Owner Trading Fee:"}),Object(r.jsx)(ft,{numerator:a,denominator:i,set:function(t,n){return e.setOptions(Object(q.a)(Object(q.a)({},e.options),{},{ownerTradeFeeNumerator:t,ownerTradeFeeDenominator:n}))}})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{children:"Withdraw Fee:"}),Object(r.jsx)(ft,{numerator:o,denominator:s,set:function(t,n){return e.setOptions(Object(q.a)(Object(q.a)({},e.options),{},{ownerWithdrawFeeNumerator:t,ownerWithdrawFeeDenominator:n}))}})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{children:"Curve Type:"}),Object(r.jsxs)(T.a,{defaultValue:"0",style:{width:200},onChange:function(t){return e.setOptions(Object(q.a)(Object(q.a)({},e.options),{},{curveType:parseInt(t)}))},children:[Object(r.jsx)(pt,{value:"0",children:"Constant Product"}),Object(r.jsx)(pt,{value:"1",children:"Flat"})]})]})]})})},mt=n(35),ht=Object(r.jsx)(dt.a,{style:{fontSize:24},spin:!0}),vt=function(){var e=Object(g.c)(),t=e.wallet,n=e.connected,a=Object(C.d)(),i=Object(c.useState)(!1),o=Object(d.a)(i,2),s=o[0],u=o[1],l=Ye(),p=l.A,j=l.B,m=l.setLastTypedAccount,h=l.setPoolOperation,v=Object(ce.i)([null===p||void 0===p?void 0:p.mintAddress,null===j||void 0===j?void 0:j.mintAddress]),y=Object(C.f)().slippage,O=Object(C.e)().tokenMap,x=Object(c.useState)({curveType:0,tradeFeeNumerator:25,tradeFeeDenominator:bt,ownerTradeFeeNumerator:5,ownerTradeFeeDenominator:bt,ownerWithdrawFeeNumerator:0,ownerWithdrawFeeDenominator:bt}),w=Object(d.a)(x,2),k=w[0],A=w[1],S=n?Object(X.a)(Q.a.mark((function e(){var n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.account&&j.account&&p.mint&&j.mint&&(u(!0),n=[{account:p.account,mintAddress:p.mintAddress,amount:p.convertAmount()},{account:j.account,mintAddress:j.mintAddress,amount:j.convertAmount()}],Object(ce.d)(a,t,n,y,v,k).then((function(){u(!1)})).catch((function(e){console.log("Transaction failed",e),Object(ge.a)({description:"Please try again and approve transactions from your wallet",message:"Adding liquidity cancelled.",type:"error"}),u(!1)})));case 1:case"end":return e.stop()}}),e)}))):t.connect,N=p.sufficientBalance()&&j.sufficientBalance(),B=mt.b?Object(r.jsxs)(f.a,{className:"add-button",onClick:S,disabled:n&&(s||!p.account||!j.account||p.account===j.account),type:"primary",size:"large",children:[it(tt,n,O,p,j),s&&Object(r.jsx)(Ae.a,{indicator:ht,className:"add-spinner"})]}):Object(r.jsxs)(lt.a.Button,{className:"add-button",onClick:S,disabled:n&&(s||!p.account||!j.account||p.account===j.account),type:"primary",size:"large",overlay:Object(r.jsx)(jt,{options:k,setOptions:A}),children:[it(tt,n,O,p,j),s&&Object(r.jsx)(Ae.a,{indicator:ht,className:"add-spinner"})]});return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"input-card",children:[Object(r.jsx)(Oe,{pool:v}),Object(r.jsx)(b.a,{trigger:"hover",content:Object(r.jsx)("div",{style:{width:300},children:"Liquidity providers earn a fixed percentage fee on all trades proportional to their share of the pool. Fees are added to the pool, accrue in real time and can be claimed by withdrawing your liquidity."}),children:Object(r.jsx)(f.a,{type:"text",children:"Read more about providing liquidity."})}),Object(r.jsx)(Xe,{title:"Input",onInputChange:function(e){h(ce.b.Add),p.amount!==e&&m(p.mintAddress),p.setAmount(e)},amount:p.amount,mint:p.mintAddress,onMintChange:function(e){p.setMint(e)}}),Object(r.jsx)("div",{children:"+"}),Object(r.jsx)(Xe,{title:"Input",onInputChange:function(e){h(ce.b.Add),j.amount!==e&&m(j.mintAddress),j.setAmount(e)},amount:j.amount,mint:j.mintAddress,onMintChange:function(e){j.setMint(e)}}),v&&Object(r.jsxs)(f.a,{className:"add-button",type:"primary",size:"large",onClick:S,disabled:n&&(s||!p.account||!j.account||p.account===j.account||!N),children:[it("Provide Liquidity",n,O,p,j),s&&Object(r.jsx)(Ae.a,{indicator:ht,className:"add-spinner"})]}),!v&&B,v&&Object(r.jsx)(yt,{pool:v}),Object(r.jsx)(we,{pool:v})]}),Object(r.jsx)(Ot,{pool:v})]})},yt=function(e){var t=e.pool,n=Object(c.useMemo)((function(){return[e.pool].filter((function(e){return e}))}),[e.pool]),a=le(n)[0],i=Object(B.j)().userAccounts,o=Object(B.h)(t.pubkeys.mint),s=i.filter((function(e){return t.pubkeys.mint.equals(e.info.mint)})).reduce((function(e,t){return t.info.amount.toNumber()+e}),0)/((null===o||void 0===o?void 0:o.supply.toNumber())||0);return a?Object(r.jsxs)(v.a,{className:"ccy-input",style:{borderRadius:20,width:"100%"},bodyStyle:{padding:"7px"},size:"small",title:"Prices and pool share",children:[Object(r.jsxs)(m.a,{style:{width:"100%"},children:[Object(r.jsx)(h.a,{span:8,children:x.g.format(parseFloat(a.liquidityA)/parseFloat(a.liquidityB))}),Object(r.jsx)(h.a,{span:8,children:x.g.format(parseFloat(a.liquidityB)/parseFloat(a.liquidityA))}),Object(r.jsxs)(h.a,{span:8,children:[100*s<.001&&s>0?"<":"","\xa0",x.g.format(100*s),"%"]})]}),Object(r.jsxs)(m.a,{style:{width:"100%"},children:[Object(r.jsxs)(h.a,{span:8,children:[a.names[0]," per ",a.names[1]]}),Object(r.jsxs)(h.a,{span:8,children:[a.names[1]," per ",a.names[0]]}),Object(r.jsx)(h.a,{span:8,children:"Share of pool"})]})]}):null},Ot=function(e){var t=e.pool,n=Object(c.useMemo)((function(){return[e.pool].filter((function(e){return e}))}),[e.pool]),a=le(n)[0],i=Object(B.j)().userAccounts,o=Object(B.h)(null===t||void 0===t?void 0:t.pubkeys.mint);if(!t||!a)return null;var s=t.pubkeys.holdingMints[0].toBase58(),u=t.pubkeys.holdingMints[1].toBase58(),l=i.filter((function(e){return t.pubkeys.mint.equals(e.info.mint)})).reduce((function(e,t){return t.info.amount.toNumber()+e}),0)/((null===o||void 0===o?void 0:o.supply.toNumber())||0);return Object(r.jsx)(v.a,{className:"ccy-input",style:{borderRadius:20,width:"100%"},bodyStyle:{padding:"7px"},size:"small",title:"Your Position",children:Object(r.jsxs)("div",{className:"pool-card",style:{width:"initial"},children:[Object(r.jsxs)("div",{className:"pool-card-row",children:[Object(r.jsx)("div",{className:"pool-card-cell",children:Object(r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(r.jsx)(Y,{mintA:s,mintB:u}),Object(r.jsx)("h3",{style:{margin:0},children:null===a||void 0===a?void 0:a.name})]})}),Object(r.jsx)("div",{className:"pool-card-cell",children:Object(r.jsx)("h3",{style:{margin:0},children:x.g.format(l*a.supply)})})]}),Object(r.jsxs)("div",{className:"pool-card-row",style:{margin:0},children:[Object(r.jsx)("div",{className:"pool-card-cell",children:"Your Share:"}),Object(r.jsxs)("div",{className:"pool-card-cell",children:[100*l<.001&&l>0?"<":"",x.g.format(100*l),"%"]})]}),Object(r.jsxs)("div",{className:"pool-card-row",style:{margin:0},children:[Object(r.jsxs)("div",{className:"pool-card-cell",children:[a.names[0],":"]}),Object(r.jsx)("div",{className:"pool-card-cell",children:x.g.format(l*a.liquidityA)})]}),Object(r.jsxs)("div",{className:"pool-card-row",style:{margin:0},children:[Object(r.jsxs)("div",{className:"pool-card-cell",children:[a.names[1],":"]}),Object(r.jsx)("div",{className:"pool-card-cell",children:x.g.format(l*a.liquidityB)})]})]})})},gt=function(e){var t,n={width:120},c=[{key:"trade",tab:Object(r.jsx)("div",{style:n,children:"Trade"}),render:function(){return Object(r.jsx)(st,{})}},{key:"pool",tab:Object(r.jsx)("div",{style:n,children:"Pool"}),render:function(){return Object(r.jsx)(vt,{})}}],a=Object(l.f)(),i=Object(l.e)(),o=a.pathname.indexOf("add")<0?"trade":"pool";return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(F,{right:Object(r.jsx)(b.a,{placement:"topRight",title:"Settings",content:Object(r.jsx)(R,{}),trigger:"click",children:Object(r.jsx)(f.a,{shape:"circle",size:"large",type:"text",icon:Object(r.jsx)(U.a,{})})})}),Object(r.jsx)(v.a,{className:"exchange-card",headStyle:{padding:0},bodyStyle:{position:"relative"},tabList:c,tabProps:{tabBarGutter:0},activeTabKey:o,onTabChange:function(e){!function(e){o!==e&&("trade"===e?i.push("/"):i.push("/add"))}(e)},children:null===(t=c.find((function(e){return e.key===o})))||void 0===t?void 0:t.render()})]})};function xt(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(u.a,{basename:"/",children:Object(r.jsx)(C.a,{children:Object(r.jsx)(g.b,{children:Object(r.jsx)(B.a,{children:Object(r.jsx)(ue,{children:Object(r.jsxs)(_e,{children:[Object(r.jsx)(l.a,{exact:!0,path:"/",component:gt}),Object(r.jsx)(l.a,{exact:!0,path:"/add",component:gt}),Object(r.jsx)(l.a,{exact:!0,path:"/info",component:function(){return Object(r.jsx)(Ue,{})}}),Object(r.jsx)(l.a,{exact:!0,path:"/pool",component:function(){return Object(r.jsx)(Je,{})}})]})})})})})})})}var wt=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("div",{className:"Banner",children:Object(r.jsx)("div",{className:"Banner-description",children:"Swap is unaudited software. Use at your own risk."})}),Object(r.jsx)(xt,{}),Object(r.jsxs)("div",{className:"social-buttons",children:[Object(r.jsx)(s.a,{href:"https://github.com/project-serum/oyster-swap","data-color-scheme":"no-preference: light; light: light; dark: light;","data-icon":"octicon-star","data-size":"large","data-show-count":!0,"aria-label":"Star solana-labs/oyster-swap on GitHub",children:"Star"}),Object(r.jsx)(s.a,{href:"https://github.com/project-serum/oyster-swap/fork","data-color-scheme":"no-preference: light; light: light; dark: light;","data-size":"large","aria-label":"Fork project-serum/oyster-swap on GitHub",children:"Fork"})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(wt,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},155:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),c=(n(0),n(1060)),a=n(18),i=function(e){var t,n,i=e.type,o=e.code,s="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58();if(!s)return null;var u=null!==(n=e.length)&&void 0!==n?n:9;return Object(r.jsx)("a",{href:"https://explorer.solana.com/".concat(i,"/").concat(s),target:"_blank",title:s,style:e.style,children:o?Object(r.jsx)(c.a.Text,{style:e.style,code:!0,children:Object(a.n)(s,u)}):Object(a.n)(s,u)})}},18:function(e,t,n){"use strict";n.d(t,"o",(function(){return i})),n.d(t,"n",(function(){return o})),n.d(t,"l",(function(){return s})),n.d(t,"k",(function(){return u})),n.d(t,"j",(function(){return l})),n.d(t,"m",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return b})),n.d(t,"d",(function(){return f})),n.d(t,"i",(function(){return j})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return v})),n.d(t,"h",(function(){return y})),n.d(t,"c",(function(){return O}));var r=n(32),c=n(26),a=n(0);function i(e,t){var n=Object(a.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),r=Object(c.a)(n,2),i=r[0],o=r[1],s=Object(a.useCallback)((function(t){i!==t&&(o(t),null===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t)))}),[i,e]);return[i,s]}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}function s(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=null===(n=e.get(t))||void 0===n?void 0:n.tokenSymbol;return a||(r?"".concat(t.substring(0,c),"..."):t)}function u(e,t){var n;return null===(n=e.get(t))||void 0===n?void 0:n.icon}function l(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort();return r.map((function(t){return s(e,t,n)})).join("/")}function d(e,t){return!!e.get(t)}var p=new Set(["USDC","wUSDC","USDT"]);function b(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,r){return e.slice(r*t,(r+1)*t)}))}function f(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e)return 0;var c="number"===typeof e?e:null===(n=e.info.amount)||void 0===n?void 0:n.toNumber(),a=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0);return c/a*r}var j=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),m=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),h=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),v=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:8}),y=new Intl.DateTimeFormat("en-US",{day:"numeric",month:"short"}),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,3,5,100],n=1,c=["#27ae60","inherit","#f3841e","#ff3945"];if(e>t[t.length-1])return c[n];var a=Object(r.a)(t).sort((function(t,n){var r=t-e<0?Number.POSITIVE_INFINITY:t-e,c=n-e<0?Number.POSITIVE_INFINITY:n-e;return r<c?-1:r>c?1:0}))[0],i=t.indexOf(a);return-1!==i?c[i]:c[n]}},19:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return P})),n.d(t,"d",(function(){return E})),n.d(t,"a",(function(){return z})),n.d(t,"i",(function(){return R})),n.d(t,"e",(function(){return U})),n.d(t,"h",(function(){return V})),n.d(t,"j",(function(){return _})),n.d(t,"g",(function(){return Y})),n.d(t,"f",(function(){return H}));var r=n(518),c=n(32),a=n(26),i=n(282),o=n(54),s=n(13),u=n.n(s),l=n(20),d=n(4),p=n(0),b=n.n(p),f=n(30),j=n(70),m=n(22),h=n(35),v=n(43),y=n(34),O=n(60),g=n(18),x=n(283),w=b.a.createContext(null),k=new x.a,A=new Map,S=new Map,N=new Map,B=new Map,M=new Map,I=new Map,F=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAccountInfo(n);case 2:if(null!==(r=e.sent)){e.next=5;break}throw new Error("Failed to find mint account");case 5:return e.abrupt("return",L(n,r));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var t=Object(l.a)(u.a.mark((function t(n,r){var c,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getAccountInfo(r);case 2:if(null!==(c=t.sent)){t.next=5;break}throw new Error("Failed to find mint account");case 5:return a=e.from(c.data),t.abrupt("return",Z(a));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),C=function(t,n){var r=e.from(n.data),c=Z(r);return{pubkey:t,account:Object(o.a)({},n),info:c}},q=new Map,P={query:function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){var c,a,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c="string"===typeof n?new m.d(n):n,a=c.toBase58(),!(i=I.get(a))){e.next=5;break}return e.abrupt("return",i);case 5:if(!(o=M.get(a))){e.next=8;break}return e.abrupt("return",o);case 8:return o=t.getAccountInfo(c).then((function(e){if(!e)throw new Error("Account not found");return P.add(c,e,r)})),M.set(a,o),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),add:function(e,t,n){var r=e.toBase58(),c=n||q.get(r);if(!c)throw new Error("Deserializer needs to be registered or passed as a parameter");P.registerParser(e,c),M.delete(r);var a=c(e,t);return I.set(r,a),a},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,I.get(t)},registerParser:function(e,t){q.set(e.toBase58(),t)},queryAccount:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,c,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new m.d(n):n,c=r.toBase58(),!(a=B.get(c))){e.next=5;break}return e.abrupt("return",a);case 5:if(!(i=N.get(c))){e.next=8;break}return e.abrupt("return",i);case 8:return i=F(t,r).then((function(e){return N.delete(c),B.set(c,e),e})),N.set(c,i),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),addAccount:function(e,t){var n=L(e,t);return B.set(n.pubkey.toBase58(),n),n},deleteAccount:function(e){var t=null===e||void 0===e?void 0:e.toBase58();B.delete(t),k.raiseAccountUpdated(t)},getAccount:function(e){var t;return t="string"!==typeof e?e.toBase58():e,B.get(t)},queryMint:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,c,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new m.d(n):n,c=r.toBase58(),!(a=S.get(c))){e.next=5;break}return e.abrupt("return",a);case 5:if(!(i=A.get(c))){e.next=8;break}return e.abrupt("return",i);case 8:return i=T(t,r).then((function(e){return N.delete(c),S.set(c,e),e})),N.set(c,i),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMint:function(e){var t;return t="string"!==typeof e?e.toBase58():e,S.get(t)},addMint:function(e,t){var n=Z(t.data);return S.set(e.toBase58(),n),n}},E=function(e){var t,n=Object(i.a)(B.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(c){n.e(c)}finally{n.f()}};function L(t,n){var r=e.from(n.data),c=J(r);return{pubkey:t,account:Object(o.a)({},n),info:c}}function K(e,t){if(t)return{pubkey:e,account:t,info:{mint:h.c,owner:e,amount:new v.d(t.lamports),delegate:null,delegatedAmount:new v.d(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}var W=new Set,D=function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return W.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(h.d)().token});case 5:e.sent.value.map((function(e){var t=J(e.account.data);return{pubkey:e.pubkey,account:Object(o.a)({},e.account),info:t}})).forEach((function(e){B.set(e.pubkey.toBase58(),e)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function z(t){var n=t.children,r=void 0===n?null:n,i=Object(f.d)(),s=Object(j.c)(),u=s.wallet,l=s.connected,b=Object(p.useState)([]),O=Object(a.a)(b,2),g=O[0],x=O[1],A=Object(p.useState)([]),N=Object(a.a)(A,2),M=N[0],F=N[1],T=function(){var e=Object(f.d)(),t=Object(j.c)().wallet,n=Object(p.useState)(),r=Object(a.a)(n,2),c=r[0],i=r[1];return Object(p.useEffect)((function(){e&&(null===t||void 0===t?void 0:t.publicKey)&&(e.getAccountInfo(t.publicKey).then((function(e){e&&i(e)})),e.onAccountChange(t.publicKey,(function(e){e&&i(e)})))}),[i,t,t.publicKey,e]),Object(p.useEffect)((function(){var e=K(t.publicKey,c);e&&B.set(e.pubkey.toBase58(),e)}),[t.publicKey,c]),{nativeAccount:c}}().nativeAccount,C=Object(y.j)().pools,q=null===u||void 0===u?void 0:u.publicKey,E=Object(p.useCallback)((function(){return Object(c.a)(B.values()).filter((function(e){return e.info.owner.toBase58()===(null===q||void 0===q?void 0:q.toBase58())}))}),[q]);return Object(p.useEffect)((function(){F([K(q,T)].concat(Object(c.a)(g)).filter((function(e){return void 0!==e})))}),[T,q,g]),Object(p.useEffect)((function(){if(i&&q){D(i,h.a),D(i,q).then((function(){x(E())}));var t=k.onAccount((function(){x(E())})),n=i.onProgramAccountChange(Object(h.d)().token,(function(t){var n=t.accountId;if(t.accountInfo.data.length===v.a.span){var r=J(t.accountInfo.data),c={pubkey:new m.d(t.accountId),account:Object(o.a)({},t.accountInfo),info:r};(W.has(c.info.owner.toBase58())||B.has(n))&&(B.set(n,c),k.raiseAccountUpdated(n))}else if(t.accountInfo.data.length===v.b.span){if(S.has(n)){var a=e.from(t.accountInfo.data),i=Z(a);S.set(n,i)}k.raiseAccountUpdated(n)}I.has(n)&&P.add(new m.d(n),t.accountInfo)}),"singleGossip");return function(){i.removeProgramAccountChangeListener(n),t()}}x([])}),[i,l,q,E]),Object(d.jsx)(w.Provider,{value:{userAccounts:M,pools:C,nativeAccount:T},children:r})}function R(){return{account:Object(p.useContext)(w).nativeAccount}}var U=function(){var t=Object(l.a)(u.a.mark((function t(n,c,a){var i,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(Object(g.b)(c,99).map((function(e){return G(n,e,a)})));case 2:return i=t.sent,s=i.map((function(t){return t.array.filter((function(e){return!!e})).map((function(t){var n=t.data,c=Object(r.a)(t,["data"]);return Object(o.a)(Object(o.a)({},c),{},{data:e.from(n[0],"base64")})}))})).flat(),t.abrupt("return",{keys:c,array:s});case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),G=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){var c,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t._buildArgs([n],r,"base64"),e.next=3,t._rpcRequest("getMultipleAccounts",c);case 3:if(!(a=e.sent).error){e.next=6;break}throw new Error("failed to get info about account "+a.error.message);case 6:if(!a.result.value){e.next=9;break}return i=a.result.value,e.abrupt("return",{keys:n,array:i});case 9:throw new Error;case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function V(e){var t=Object(f.d)(),n=Object(p.useState)(),r=Object(a.a)(n,2),c=r[0],i=r[1],o="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();return Object(p.useEffect)((function(){if(o){P.queryMint(t,o).then(i).catch((function(e){return Object(O.a)({message:e.message,type:"error"})}));var e=k.onAccount((function(e){e.id===o&&P.queryMint(t,o).then(i)}));return function(){e()}}}),[t,o]),c}function _(){return{userAccounts:Object(p.useContext)(w).userAccounts}}function Y(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(p.useContext)(w),n=t.pools,r=Object(p.useMemo)((function(){return n.filter((function(t){return t.legacy===e}))}),[n,e]);return{pools:r}}var H=function(e){var t=_().userAccounts,n=t.findIndex((function(t){return t.info.mint.toBase58()===e}));if(-1!==n)return t[n]},J=function(e){var t=v.a.decode(e);return t.mint=new m.d(t.mint),t.owner=new m.d(t.owner),t.amount=v.d.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new v.d(0)):(t.delegate=new m.d(t.delegate),t.delegatedAmount=v.d.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=v.d.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new m.d(t.closeAuthority),t},Z=function(e){if(e.length!==v.b.span)throw new Error("Not a valid Mint");var t=v.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new m.d(t.mintAuthority),t.supply=v.d.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new m.d(t.freezeAuthority),t}}).call(this,n(66).Buffer)},283:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(84),c=n(80),a=n(145),i=function e(t){Object(c.a)(this,e),this.id=void 0,this.id=t};i.type="AccountUpdate";var o=function e(t){Object(c.a)(this,e),this.ids=void 0,this.ids=t};o.type="MarketUpdate";var s=function(){function e(){Object(c.a)(this,e),this.emitter=new a.EventEmitter}return Object(r.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(o.type,e),function(){return t.emitter.removeListener(o.type,e)}}},{key:"onAccount",value:function(e){var t=this;return this.emitter.on(i.type,e),function(){return t.emitter.removeListener(i.type,e)}}},{key:"raiseAccountUpdated",value:function(e){this.emitter.emit(i.type,new i(e))}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(o.type,new o(e))}}]),e}()},30:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return y})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return x})),n.d(t,"c",(function(){return k}));var r=n(32),c=n(13),a=n.n(c),i=n(20),o=n(26),s=n(4),u=n(18),l=n(22),d=n(0),p=n.n(d),b=n(35),f=n(60),j=n(155),m=[{name:"mainnet-beta",endpoint:"https://solana-api.projectserum.com/"},{name:"testnet",endpoint:Object(l.h)("testnet")},{name:"devnet",endpoint:Object(l.h)("devnet")},{name:"localnet",endpoint:"http://127.0.0.1:8899"}],h=m[0].endpoint,v=p.a.createContext({endpoint:h,setEndpoint:function(){},slippage:.25,setSlippage:function(e){},connection:new l.b(h,"recent"),sendConnection:new l.b(h,"recent"),env:m[0].name,tokens:[],tokenMap:new Map});function y(e){var t,n=e.children,r=void 0===n?void 0:n,c=Object(u.o)("connectionEndpts",m[0].endpoint),a=Object(o.a)(c,2),i=a[0],p=a[1],f=Object(u.o)("slippage",.25.toString()),j=Object(o.a)(f,2),h=j[0],y=j[1],O=Object(d.useMemo)((function(){return new l.b(i,"recent")}),[i]),g=Object(d.useMemo)((function(){return new l.b(i,"recent")}),[i]),x=(null===(t=m.find((function(e){return e.endpoint===i})))||void 0===t?void 0:t.name)||m[0].name,w=Object(d.useState)([]),k=Object(o.a)(w,2),A=k[0],S=k[1],N=Object(d.useState)(new Map),B=Object(o.a)(N,2),M=B[0],I=B[1];return Object(d.useEffect)((function(){window.fetch("https://raw.githubusercontent.com/solana-labs/token-list/main/src/tokens/".concat(x,".json")).then((function(e){return e.json()})).then((function(e){var t=e.reduce((function(e,t){return e.set(t.mintAddress,t),e}),new Map);I(t),S(e)}))}),[x]),Object(b.e)(x),Object(d.useEffect)((function(){var e=O.onAccountChange((new l.a).publicKey,(function(){}));return function(){O.removeAccountChangeListener(e)}}),[O]),Object(d.useEffect)((function(){var e=O.onSlotChange((function(){return null}));return function(){O.removeSlotChangeListener(e)}}),[O]),Object(d.useEffect)((function(){var e=g.onAccountChange((new l.a).publicKey,(function(){}));return function(){g.removeAccountChangeListener(e)}}),[g]),Object(d.useEffect)((function(){var e=g.onSlotChange((function(){return null}));return function(){g.removeSlotChangeListener(e)}}),[g]),Object(s.jsx)(v.Provider,{value:{endpoint:i,setEndpoint:p,slippage:parseFloat(h),setSlippage:function(e){return y(e.toString())},connection:O,sendConnection:g,tokens:A,tokenMap:M,env:x},children:r})}function O(){return Object(d.useContext)(v).connection}function g(){var e=Object(d.useContext)(v);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}function x(){var e=Object(d.useContext)(v);return{slippage:e.slippage,setSlippage:e.setSlippage}}var w=function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return r=e.sent,c=[],(null===r||void 0===r?void 0:r.meta)&&r.meta.logMessages&&r.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&c.push(t[1])})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(a.a.mark((function e(t,n,c,i){var o,u,d,p,b,m,h,v,y,O=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=!(O.length>4&&void 0!==O[4])||O[4],d=new l.f,c.forEach((function(e){return d.add(e)})),e.next=5,t.getRecentBlockhash("max");case 5:return d.recentBlockhash=e.sent.blockhash,(o=d).setSigners.apply(o,[n.publicKey].concat(Object(r.a)(i.map((function(e){return e.publicKey}))))),i.length>0&&(p=d).partialSign.apply(p,Object(r.a)(i)),e.next=10,n.signTransaction(d);case 10:return d=e.sent,b=d.serialize(),m={skipPreflight:!0,commitment:"singleGossip"},e.next=15,t.sendRawTransaction(b,m);case 15:if(h=e.sent,!u){e.next=26;break}return e.next=19,t.confirmTransaction(h,m&&m.commitment);case 19:if(!(null===(v=e.sent.value)||void 0===v?void 0:v.err)){e.next=26;break}return e.next=23,w(t,h);case 23:throw y=e.sent,Object(f.a)({message:"Transaction failed...",description:Object(s.jsxs)(s.Fragment,{children:[y.map((function(e){return Object(s.jsx)("div",{children:e})})),Object(s.jsx)(j.a,{address:h,type:"transaction"})]}),type:"error"}),new Error("Raw transaction ".concat(h," failed (").concat(JSON.stringify(v),")"));case 26:return e.abrupt("return",h);case 27:case"end":return e.stop()}}),e)})));return function(t,n,r,c){return e.apply(this,arguments)}}()},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return v})),n.d(t,"f",(function(){return y})),n.d(t,"g",(function(){return O})),n.d(t,"d",(function(){return g})),n.d(t,"j",(function(){return k})),n.d(t,"i",(function(){return A})),n.d(t,"h",(function(){return S})),n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return T}));var r,c=n(32),a=n(26),i=n(13),o=n.n(i),s=n(20),u=n(22),l=n(30),d=n(0),p=n(43),b=n(60),f=n(19),j=n(35),m=n(92),h=.003,v=5e-4,y=function(){var e=Object(s.a)(o.a.mark((function e(t,n,r,c,a){var i,s,u,d,h,v,y,O,g,x,w,k,A;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}throw new Error("Pool is required");case 2:return Object(b.a)({message:"Removing Liquidity...",description:"Please review transactions to approve.",type:"warn"}),i=0,s=0,e.next=7,f.c.queryMint(t,a.pubkeys.mint);case 7:return u=e.sent,e.next=10,f.c.queryAccount(t,a.pubkeys.holdingAccounts[0]);case 10:return d=e.sent,e.next=13,f.c.queryAccount(t,a.pubkeys.holdingAccounts[1]);case 13:if(h=e.sent,u.mintAuthority){e.next=16;break}throw new Error("Mint doesnt have authority");case 16:return v=u.mintAuthority,y=[],O=[],g=[],e.next=22,t.getMinimumBalanceForRentExemption(p.a.span);case 22:return x=e.sent,e.next=25,M(n.publicKey,n.publicKey,O,g,x,d.info.mint,y);case 25:return e.t0=e.sent,e.next=28,M(n.publicKey,n.publicKey,O,g,x,h.info.mint,y);case 28:return e.t1=e.sent,w=[e.t0,e.t1],O.push(p.c.createApproveInstruction(Object(j.d)().token,c.pubkey,v,n.publicKey,[],r)),O.push(Object(m.withdrawInstruction)(a.pubkeys.account,v,a.pubkeys.mint,a.pubkeys.feeAccount,c.pubkey,a.pubkeys.holdingAccounts[0],a.pubkeys.holdingAccounts[1],w[0],w[1],a.pubkeys.program,Object(j.d)().token,r,i,s)),(k=r===c.info.amount.toNumber())&&O.push(p.c.createCloseAccountInstruction(Object(j.d)().token,c.pubkey,v,n.publicKey,[])),e.next=36,Object(l.c)(t,n,O.concat(g),y);case 36:return A=e.sent,k&&f.c.deleteAccount(c.pubkey),Object(b.a)({message:"Liquidity Returned. Thank you for your support.",type:"success",description:"Transaction - ".concat(A)}),e.abrupt("return",[d.info.mint.equals(j.c)?n.publicKey:w[0],h.info.mint.equals(j.c)?n.publicKey:w[1]]);case 40:case"end":return e.stop()}}),e)})));return function(t,n,r,c,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(s.a)(o.a.mark((function e(t,n,r,c,a){var i,s,d,h,v,y,O,g,x,w,k,A,S,N,B;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&r[0].account){e.next=3;break}return Object(b.a)({type:"error",message:"Pool doesn't exsist.",description:"Swap trade cancelled"}),e.abrupt("return");case 3:return s=r[0].amount,d=r[1].amount*(1-c),h=(null===(i=a.pubkeys.holdingMints[0])||void 0===i?void 0:i.toBase58())===r[0].account.info.mint.toBase58()?a.pubkeys.holdingAccounts[0]:a.pubkeys.holdingAccounts[1],v=h===a.pubkeys.holdingAccounts[0]?a.pubkeys.holdingAccounts[1]:a.pubkeys.holdingAccounts[0],e.next=9,f.c.queryMint(t,a.pubkeys.mint);case 9:if((y=e.sent).mintAuthority&&a.pubkeys.feeAccount){e.next=12;break}throw new Error("Mint doesnt have authority");case 12:return O=y.mintAuthority,g=[],x=[],w=[],e.next=18,t.getMinimumBalanceForRentExemption(p.a.span);case 18:return k=e.sent,A=E(g,x,r[0].account,n.publicKey,s+k,w),S=M(n.publicKey,n.publicKey,g,x,k,new u.d(r[1].mintAddress),w),g.push(p.c.createApproveInstruction(Object(j.d)().token,A,O,n.publicKey,[],s)),N=j.a?M(n.publicKey,j.a,g,x,k,a.pubkeys.mint,w):void 0,g.push(Object(m.swapInstruction)(a.pubkeys.account,O,A,h,v,S,a.pubkeys.mint,a.pubkeys.feeAccount,a.pubkeys.program,Object(j.d)().token,s,d,N)),e.next=26,Object(l.c)(t,n,g.concat(x),w);case 26:B=e.sent,Object(b.a)({message:"Trade executed.",type:"success",description:"Transaction - ".concat(B)});case 28:case"end":return e.stop()}}),e)})));return function(t,n,r,c,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(s.a)(o.a.mark((function e(t,n,r,c,a,i){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=7;break}if(i){e.next=3;break}throw new Error("Options are required to create new pool.");case 3:return e.next=5,q(n,t,r,i);case 5:e.next=9;break;case 7:return e.next=9,N(a,r,t,n);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,c,a,i){return e.apply(this,arguments)}}(),x=function(e,t){return t.map((function(t){return f.c.queryAccount(e,new u.d(t))}))},w=function(e,t){var n=new u.d(e.data.tokenPool);return{pubkeys:{account:e.pubkey,program:t,mint:n,holdingMints:[],holdingAccounts:[e.data.tokenAccountA,e.data.tokenAccountB].map((function(e){return new u.d(e)}))},legacy:!1,raw:e}},k=function(){var e=Object(l.d)(),t=Object(d.useState)([]),n=Object(a.a)(t,2),r=n[0],i=n[1];return Object(d.useEffect)((function(){i([]);var t=function(){var t=Object(s.a)(o.a.mark((function t(n){var r,a,i,l=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>1&&void 0!==l[1]&&l[1],a=[],t.next=4,e.getProgramAccounts(n);case 4:return t.sent.filter((function(e){return e.account.data.length===m.TokenSwapLayout.span||e.account.data.length===m.TokenSwapLayoutLegacyV0.span})).map((function(t){var c={data:void 0,account:t.account,pubkey:t.pubkey,init:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};if(t.account.data.length===m.TokenSwapLayoutLegacyV0.span){c.data=m.TokenSwapLayoutLegacyV0.decode(t.account.data);var i=w(c,n);i.legacy=r,a.push(i),c.init=Object(s.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all(x(e,[c.data.tokenAccountA,c.data.tokenAccountB]));case 3:n=t.sent,i.pubkeys.holdingMints=[n[0].info.mint,n[1].info.mint],t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))}else{c.data=m.TokenSwapLayout.decode(t.account.data);var l=w(c,n);l.legacy=r,l.pubkeys.feeAccount=new u.d(c.data.feeAccount),l.pubkeys.holdingMints=[new u.d(c.data.mintA),new u.d(c.data.mintB)],a.push(l)}return c})),i=a.map((function(e){var t;return[].concat(Object(c.a)(e.pubkeys.holdingAccounts.map((function(e){return e.toBase58()}))),Object(c.a)(e.pubkeys.holdingMints.map((function(e){return e.toBase58()}))),[null===(t=e.pubkeys.feeAccount)||void 0===t?void 0:t.toBase58(),e.pubkeys.mint.toBase58()]).filter((function(e){return e}))})).flat(),t.next=8,Object(f.e)(e,i,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var r=new u.d(t[n]);return e.data.length===p.a.span?f.c.addAccount(r,e):e.data.length===p.b.span?f.c.addMint(r,e):e}))}));case 8:return t.abrupt("return",a);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Promise.all([t(Object(j.d)().swap)].concat(Object(c.a)(Object(j.d)().swap_legacy.map((function(e){return t(e,!0)}))))).then((function(e){i(e.flat())}))}),[e]),Object(d.useEffect)((function(){var t=e.onProgramAccountChange(Object(j.d)().swap,function(){var e=Object(s.a)(o.a.mark((function e(t){var n,a,s,l,d,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.accountId,t.accountInfo.data.length===m.TokenSwapLayout.span&&(a=t.accountInfo,s={data:m.TokenSwapLayout.decode(a.data),account:a,pubkey:new u.d(n)},(l=r&&r.findIndex((function(e){return e.pubkeys.account.toBase58()===n})))&&l>=0&&r?(d=r.filter((function(e,t){return t!==l})),i([].concat(Object(c.a)(d),[w(s,Object(j.d)().swap)]))):((p=w(s,Object(j.d)().swap)).pubkeys.feeAccount=new u.d(s.data.feeAccount),p.pubkeys.holdingMints=[new u.d(s.data.mintA),new u.d(s.data.mintB)],i([].concat(Object(c.a)(r),[p]))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"singleGossip");return function(){e.removeProgramAccountChangeListener(t)}}),[e,r]),{pools:r}},A=function(e){var t=Object(l.d)(),n=Object(f.g)().pools,r=Object(d.useState)(),i=Object(a.a)(r,2),u=i[0],p=i[1],b=Object(d.useMemo)((function(){return Object(c.a)(e).sort()}),Object(c.a)(e));return Object(d.useEffect)((function(){Object(s.a)(o.a.mark((function e(){var r,c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(void 0),r=n.filter((function(e){return!e.legacy})).filter((function(e){return e.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort().every((function(e,t){return e===b[t]}))})),c=0;case 3:if(!(c<r.length)){e.next=14;break}return a=r[c],e.next=7,f.c.queryAccount(t,a.pubkeys.holdingAccounts[0]);case 7:if(e.sent.info.amount.eqn(0)){e.next=11;break}return p(a),e.abrupt("return");case 11:c++,e.next=3;break;case 14:case"end":return e.stop()}}),e)})))()}),[t,b,n]),u},S=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(f.g)(e),n=t.pools,r=Object(f.j)(),a=r.userAccounts,i=Object(d.useMemo)((function(){var t=a.reduce((function(e,t){var n=t.info.mint.toBase58();return e.set(n,[].concat(Object(c.a)(e.get(n)||[]),[t])),e}),new Map);return n.filter((function(n){return t.has(n.pubkeys.mint.toBase58())&&n.legacy===e})).map((function(e){var n,r,c=null===(n=e.pubkeys.feeAccount)||void 0===n?void 0:n.toBase58();return null===(r=t.get(e.pubkeys.mint.toBase58()))||void 0===r?void 0:r.map((function(t){return{account:t,isFeeAccount:c===t.pubkey.toBase58(),pool:e}}))})).flat()}),[n,a,e]);return i};function N(e,t,n,r){return B.apply(this,arguments)}function B(){return(B=Object(s.a)(o.a.mark((function e(t,n,r,c){var a,i,s,u,d,h,v,y,O,g,x,w,k,A,S,N,B,I,F,T;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(b.a)({message:"Adding Liquidity...",description:"Please review transactions to approve.",type:"warn"}),e.next=3,f.c.queryMint(r,t.pubkeys.mint);case 3:if((a=e.sent).mintAuthority){e.next=6;break}throw new Error("Mint doesnt have authority");case 6:if(t.pubkeys.feeAccount){e.next=8;break}throw new Error("Invald fee account");case 8:return e.next=10,f.c.queryAccount(r,t.pubkeys.holdingAccounts[0]);case 10:return i=e.sent,e.next=13,f.c.queryAccount(r,t.pubkeys.holdingAccounts[1]);case 13:if(s=e.sent,u=i.info.amount.toNumber(),d=s.info.amount.toNumber(),h=i.info.mint.toBase58()===n[0].mintAddress?n[0]:n[1],v=h===n[0]?n[1]:n[0],h.account&&v.account){e.next=20;break}throw new Error("Missing account info.");case 20:return y=a.supply.toNumber(),O=a.mintAuthority,g=h.amount,x=v.amount,w=Math.min(.995*g*y/u,.995*x*y/d),k=[],A=[],S=[],e.next=30,r.getMinimumBalanceForRentExemption(p.a.span);case 30:return N=e.sent,B=E(k,A,h.account,c.publicKey,g+N,S),I=E(k,A,v.account,c.publicKey,x+N,S),F=M(c.publicKey,c.publicKey,k,[],N,t.pubkeys.mint,S,new Set([t.pubkeys.feeAccount.toBase58()])),k.push(p.c.createApproveInstruction(Object(j.d)().token,B,O,c.publicKey,[],g)),k.push(p.c.createApproveInstruction(Object(j.d)().token,I,O,c.publicKey,[],x)),k.push(Object(m.depositInstruction)(t.pubkeys.account,O,B,I,t.pubkeys.holdingAccounts[0],t.pubkeys.holdingAccounts[1],t.pubkeys.mint,F,t.pubkeys.program,Object(j.d)().token,w,g,x)),e.next=39,Object(l.c)(r,c,k.concat(A),S);case 39:T=e.sent,Object(b.a)({message:"Pool Funded. Happy trading.",type:"success",description:"Transaction - ".concat(T)});case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t,n,r,c,a,i,o){var s,u=a.toBase58(),l=Object(f.d)((function(e){return e.info.mint.toBase58()===u&&e.info.owner.toBase58()===t.toBase58()&&(void 0===o||!o.has(e.pubkey.toBase58()))})),d=u===j.c.toBase58();if(l&&!d)s=l.pubkey;else{var b=L(n,e,c,a,t,p.a.span);s=b.publicKey,i.push(b),d&&r.push(p.c.createCloseAccountInstruction(Object(j.d)().token,s,e,e,[]))}return s}function I(e,t,n){return t*n/(e+n)}function F(e,t,n){return n>=t?"Not possible":e*n/(t-n)}function T(e,t,n,r,c){return C.apply(this,arguments)}function C(){return(C=Object(s.a)(o.a.mark((function e(t,n,c,a,i){var s,u,l,d,p,b,j,m,h,v,y,O;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.c.queryMint(t,a.pubkeys.mint);case 2:return s=e.sent,e.next=5,f.c.queryAccount(t,a.pubkeys.holdingAccounts[0]);case 5:return u=e.sent,e.next=8,f.c.queryAccount(t,a.pubkeys.holdingAccounts[1]);case 8:if(l=e.sent,s.mintAuthority){e.next=11;break}throw new Error("Mint doesnt have authority");case 11:if(!s.supply.eqn(0)){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,f.c.queryMint(t,u.info.mint);case 15:return d=e.sent,e.next=18,f.c.queryMint(t,l.info.mint);case 18:if(p=e.sent,d&&p){e.next=21;break}return e.abrupt("return");case 21:b=u.info.mint.toBase58()===n,j=Math.pow(10,b?p.decimals:d.decimals),m=Math.pow(10,b?d.decimals:p.decimals),h=c*m,v=(b?u:l).info.amount.toNumber(),y=(b?l:u).info.amount.toNumber(),e.t0=+i,e.next=e.t0===r.Add?30:e.t0===r.SwapGivenProceeds?32:e.t0===r.SwapGivenInput?34:36;break;case 30:return O=y/v*h,e.abrupt("break",36);case 32:return O=F(y,v,h),e.abrupt("break",36);case 34:return O=I(v,y,h),e.abrupt("break",36);case 36:if("string"!==typeof O){e.next=38;break}return e.abrupt("return",O);case 38:if(void 0!==O){e.next=40;break}return e.abrupt("return",void 0);case 40:return e.abrupt("return",O/j);case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t,n,r){return P.apply(this,arguments)}function P(){return(P=Object(s.a)(o.a.mark((function e(t,n,r,i){var s,d,f,h,v,y,O,g,x,w,k,A,S,N;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(b.a)({message:"Creating new pool...",description:"Please review transactions to approve.",type:"warn"}),!r.some((function(e){return!e.account}))){e.next=4;break}return Object(b.a)({message:"You need to have balance for all legs in the basket...",description:"Please review inputs.",type:"error"}),e.abrupt("return");case 4:return s=[],d=[],f=new u.a,e.t0=s,e.t1=u.e,e.t2=t.publicKey,e.t3=f.publicKey,e.next=13,n.getMinimumBalanceForRentExemption(p.b.span);case 13:return e.t4=e.sent,e.t5=p.b.span,e.t6=Object(j.d)().token,e.t7={fromPubkey:e.t2,newAccountPubkey:e.t3,lamports:e.t4,space:e.t5,programId:e.t6},e.t8=e.t1.createAccount.call(e.t1,e.t7),e.t0.push.call(e.t0,e.t8),h=new u.a,e.next=22,u.d.findProgramAddress([h.publicKey.toBuffer()],Object(j.d)().swap);case 22:return v=e.sent,y=Object(a.a)(v,2),O=y[0],g=y[1],s.push(p.c.createInitMintInstruction(Object(j.d)().token,f.publicKey,8,O,null)),e.next=29,n.getMinimumBalanceForRentExemption(p.a.span);case 29:return x=e.sent,w=[],k=[],r.forEach((function(e){if(e.account){var n=e.account.info.mint;w.push(L(s,t.publicKey,x,n,O,p.a.span))}})),A=L(s,t.publicKey,x,f.publicKey,t.publicKey,p.a.span),S=L(s,t.publicKey,x,f.publicKey,j.b||t.publicKey,p.a.span),e.next=37,Object(l.c)(n,t,s,[f,A,S].concat(w,Object(c.a)(k)));case 37:return N=e.sent,Object(b.a)({message:"Accounts created",description:"Transaction ".concat(N),type:"success"}),Object(b.a)({message:"Adding Liquidity...",description:"Please review transactions to approve.",type:"warn"}),k=[],s=[],d=[],e.t9=s,e.t10=u.e,e.t11=t.publicKey,e.t12=h.publicKey,e.next=49,n.getMinimumBalanceForRentExemption(m.TokenSwapLayout.span);case 49:return e.t13=e.sent,e.t14=m.TokenSwapLayout.span,e.t15=Object(j.d)().swap,e.t16={fromPubkey:e.t11,newAccountPubkey:e.t12,lamports:e.t13,space:e.t14,programId:e.t15},e.t17=e.t10.createAccount.call(e.t10,e.t16),e.t9.push.call(e.t9,e.t17),r.forEach((function(e,n){if(e.account){var r=E(s,d,e.account,t.publicKey,e.amount+x,k);s.push(p.c.createTransferInstruction(Object(j.d)().token,r,w[n].publicKey,t.publicKey,[],e.amount))}})),s.push(Object(m.createInitSwapInstruction)(h,O,w[0].publicKey,w[1].publicKey,f.publicKey,S.publicKey,A.publicKey,Object(j.d)().token,Object(j.d)().swap,g,i.curveType,i.tradeFeeNumerator,i.tradeFeeDenominator,i.ownerTradeFeeNumerator,i.ownerTradeFeeDenominator,i.ownerWithdrawFeeNumerator,i.ownerWithdrawFeeDenominator)),e.next=59,Object(l.c)(n,t,s.concat(d),[h].concat(Object(c.a)(k)));case 59:N=e.sent,Object(b.a)({message:"Pool Funded. Happy trading.",type:"success",description:"Transaction - ".concat(N)});case 61:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t,n,r,c,a){if(!n.info.isNative)return n.pubkey;var i=new u.a;return e.push(u.e.createAccount({fromPubkey:r,newAccountPubkey:i.publicKey,lamports:c,space:p.a.span,programId:Object(j.d)().token})),e.push(p.c.createInitAccountInstruction(Object(j.d)().token,j.c,i.publicKey,r)),t.push(p.c.createCloseAccountInstruction(Object(j.d)().token,i.publicKey,r,r,[])),a.push(i),i.publicKey}function L(e,t,n,r,c,a){var i=new u.a;return e.push(u.e.createAccount({fromPubkey:t,newAccountPubkey:i.publicKey,lamports:n,space:a,programId:Object(j.d)().token})),e.push(p.c.createInitAccountInstruction(Object(j.d)().token,r,i.publicKey,c)),i}!function(e){e[e.Add=0]="Add",e[e.SwapGivenInput=1]="SwapGivenInput",e[e.SwapGivenProceeds=2]="SwapGivenProceeds"}(r||(r={}))},35:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return p}));var r,c,a=n(22),i=new a.d("So11111111111111111111111111111111111111112"),o=new a.d("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),s=new a.d("HfoTxFR1Tm6kGmWgYWD6J7YHVy1UwqSULUGVLXkJqaKN"),u=s;console.debug("Host address: ".concat(null===u||void 0===u?void 0:u.toBase58())),console.debug("Owner address: ".concat(null===s||void 0===s?void 0:s.toBase58()));var l=[{name:"mainnet-beta",swap:function(){return{current:new a.d("9qvG1zUp8xF1Bi4m6UdRNby1BAAuaDrUxSpv4CmRRMjL"),legacy:[]}}},{name:"testnet",swap:function(){return{current:new a.d("2n2dsFSgmPcZ8jkmBZLGUM2nzuFqcBGQ3JEEj6RJJcEg"),legacy:[new a.d("9tdctNJuFsYZ6VrKfKEuwwbPp4SFdFw3jYBZU8QUtzeX"),new a.d("CrRvVBS4Hmj47TPU3cMukurpmCUYUrdHYxTQBxncBGqw")]}}},{name:"devnet",swap:function(){return{current:new a.d("BSfTAcBdqmvX5iE2PW88WFNNp2DHhLUaBKk5WrnxVkcJ"),legacy:[new a.d("H1E1G7eD5Rrcy43xvDxXCsjkRggz7MWNMLGJ8YNzJ8PM"),new a.d("CMoteLxSPVPoc7Drcggf3QPg3ue8WPpxYyZTg77UGqHo"),new a.d("EEuPz4iZA5reBUeZj6x1VzoiHfYeHMppSCnHZasRFhYo")]}}},{name:"localnet",swap:function(){return{current:new a.d("5rdpyt5iGfr68qt28hkefcFyF4WtyhTwqKDmHSBG8GZx"),legacy:[]}}}],d=function(e){var t=l.find((function(t){return t.name===e}));if(t){var n=t.swap();r=n.current,c=n.legacy}},p=function(){return{token:o,swap:r,swap_legacy:c}}},382:function(e,t){},383:function(e,t){},384:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return b}));var r=n(115),c=n(22),a=n(1),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey";return a.blob(32,e)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint64";return a.blob(8,e)},s=a.struct([a.u8("isInitialized"),a.u8("nonce"),i("tokenAccountA"),i("tokenAccountB"),i("tokenPool"),o("feesNumerator"),o("feesDenominator")]),u=a.struct([a.u8("isInitialized"),a.u8("nonce"),i("tokenProgramId"),i("tokenAccountA"),i("tokenAccountB"),i("tokenPool"),i("mintA"),i("mintB"),i("feeAccount"),a.u8("curveType"),o("tradeFeeNumerator"),o("tradeFeeDenominator"),o("ownerTradeFeeNumerator"),o("ownerTradeFeeDenominator"),o("ownerWithdrawFeeNumerator"),o("ownerWithdrawFeeDenominator"),a.blob(16,"padding")]),l=function(t,n,r,i,o,s,u,l,d,p,b,f,j,m,h,v,y){var O=[{pubkey:t.publicKey,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1}],g=a.struct([a.u8("instruction"),a.u8("nonce"),a.u8("curveType"),a.nu64("tradeFeeNumerator"),a.nu64("tradeFeeDenominator"),a.nu64("ownerTradeFeeNumerator"),a.nu64("ownerTradeFeeDenominator"),a.nu64("ownerWithdrawFeeNumerator"),a.nu64("ownerWithdrawFeeDenominator"),a.blob(16,"padding")]),x=e.alloc(1024),w=g.encode({instruction:0,nonce:p,curveType:b,tradeFeeNumerator:f,tradeFeeDenominator:j,ownerTradeFeeNumerator:m,ownerTradeFeeDenominator:h,ownerWithdrawFeeNumerator:v,ownerWithdrawFeeDenominator:y},x);return x=x.slice(0,w),new c.g({keys:O,programId:d,data:x})},d=function(t,n,i,s,u,l,d,p,b,f,j,m,h){var v=a.struct([a.u8("instruction"),o("poolTokenAmount"),o("maximumTokenA"),o("maximumTokenB")]),y=e.alloc(v.span);v.encode({instruction:2,poolTokenAmount:new r.a(j).toBuffer(),maximumTokenA:new r.a(m).toBuffer(),maximumTokenB:new r.a(h).toBuffer()},y);var O=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1}];return new c.g({keys:O,programId:b,data:y})},p=function(t,n,i,s,u,l,d,p,b,f,j,m,h,v){var y=a.struct([a.u8("instruction"),o("poolTokenAmount"),o("minimumTokenA"),o("minimumTokenB")]),O=e.alloc(y.span);y.encode({instruction:3,poolTokenAmount:new r.a(m).toBuffer(),minimumTokenA:new r.a(h).toBuffer(),minimumTokenB:new r.a(v).toBuffer()},O);var g=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0}];return s&&g.push({pubkey:s,isSigner:!1,isWritable:!0}),g.push({pubkey:j,isSigner:!1,isWritable:!1}),new c.g({keys:g,programId:f,data:O})},b=function(t,n,i,s,u,l,d,p,b,f,j,m,h){var v=a.struct([a.u8("instruction"),o("amountIn"),o("minimumAmountOut")]),y=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1}];h&&y.push({pubkey:h,isSigner:!1,isWritable:!0});var O=e.alloc(v.span);return v.encode({instruction:1,amountIn:new r.a(j).toBuffer(),minimumAmountOut:new r.a(m).toBuffer()},O),new c.g({keys:y,programId:b,data:O})}}).call(this,n(66).Buffer)},385:function(e,t,n){},475:function(e,t,n){},485:function(e,t,n){},526:function(e,t,n){},527:function(e,t,n){},531:function(e,t){},532:function(e,t){},558:function(e,t){},560:function(e,t){},572:function(e,t){},573:function(e,t){},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(4),c=(n(0),n(353));function a(e){var t=e.message,n=void 0===t?"":t,a=e.description,i=void 0===a?void 0:a,o=e.txid,s=void 0===o?"":o,u=e.type,l=void 0===u?"info":u,d=e.placement,p=void 0===d?"bottomLeft":d;s&&(i=Object(r.jsx)(r.Fragment,{})),c.a[l]({message:Object(r.jsx)("span",{style:{color:"black"},children:n}),description:Object(r.jsx)("span",{style:{color:"black",opacity:.5},children:i}),placement:p,style:{backgroundColor:"white"}})}},648:function(e,t,n){},70:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return A})),n.d(t,"c",(function(){return S}));var r=n(26),c=n(4),a=n(0),i=n.n(a),o=n(486),s=n(60),u=n(30),l=n(18),d=n(13),p=n.n(d),b=n(20),f=n(80),j=n(84),m=n(192),h=n(106),v=n(105),y=n(145),O=n.n(y),g=n(22),x=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e,r){var c;return Object(f.a)(this,n),(c=t.call(this))._publicKey=void 0,c._onProcess=void 0,c._publicKey=null,c._onProcess=!1,c.connect=c.connect.bind(Object(m.a)(c)),c}return Object(j.a)(n,[{key:"signTransaction",value:function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.solong.signTransaction(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=this;this._onProcess||(void 0!==window.solong?(this._onProcess=!0,console.log("solong helper select account"),window.solong.selectAccount().then((function(t){e._publicKey=new g.d(t),console.log("window solong select:",t,"this:",e),e.emit("connect",e._publicKey)})).catch((function(){e.disconnect()})).finally((function(){e._onProcess=!1}))):Object(s.a)({message:"Solong Error",description:"Please install solong wallet from Chrome "}))}},{key:"disconnect",value:function(){this._publicKey&&(this._publicKey=null,this.emit("disconnect"))}},{key:"publicKey",get:function(){return this._publicKey}}]),n}(O.a),w=[{name:"sollet.io",url:"https://www.sollet.io"},{name:"solongwallet.com",url:"http://solongwallet.com"},{name:"solflare.com",url:"https://solflare.com/access-wallet"},{name:"mathwallet.org",url:"https://www.mathwallet.org"}],k=i.a.createContext(null);function A(e){var t,n,i=e.children,d=void 0===i?null:i,p=Object(u.e)().endpoint,b=Object(l.o)("walletProvider","https://www.sollet.io"),f=Object(r.a)(b,2),j=f[0],m=f[1],h=Object(a.useMemo)((function(){return console.log("use new provider:",j," endpoint:",p),"http://solongwallet.com"===j?new x(j,p):new o.a(j,p)}),[j,p]),v=Object(a.useState)(!1),y=Object(r.a)(v,2),O=y[0],g=y[1];return Object(a.useEffect)((function(){return console.log("trying to connect"),h.on("connect",(function(){console.log("connected"),g(!0);var e=h.publicKey.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(s.a)({message:"Wallet update",description:"Connected to wallet "+t})})),h.on("disconnect",(function(){g(!1),Object(s.a)({message:"Wallet update",description:"Disconnected from wallet"})})),function(){h.disconnect(),g(!1)}}),[h]),Object(c.jsx)(k.Provider,{value:{wallet:h,connected:O,providerUrl:j,setProviderUrl:m,providerName:null!==(t=null===(n=w.find((function(e){return e.url===j})))||void 0===n?void 0:n.name)&&void 0!==t?t:j},children:d})}function S(){var e=Object(a.useContext)(k);return{connected:e.connected,wallet:e.wallet,providerUrl:e.providerUrl,setProvider:e.setProviderUrl,providerName:e.providerName}}},92:function(e,t,n){"use strict";var r=n(382);n.o(r,"TokenSwapLayout")&&n.d(t,"TokenSwapLayout",(function(){return r.TokenSwapLayout})),n.o(r,"TokenSwapLayoutLegacyV0")&&n.d(t,"TokenSwapLayoutLegacyV0",(function(){return r.TokenSwapLayoutLegacyV0})),n.o(r,"createInitSwapInstruction")&&n.d(t,"createInitSwapInstruction",(function(){return r.createInitSwapInstruction})),n.o(r,"depositInstruction")&&n.d(t,"depositInstruction",(function(){return r.depositInstruction})),n.o(r,"swapInstruction")&&n.d(t,"swapInstruction",(function(){return r.swapInstruction})),n.o(r,"withdrawInstruction")&&n.d(t,"withdrawInstruction",(function(){return r.withdrawInstruction}));var c=n(383);n.o(c,"TokenSwapLayout")&&n.d(t,"TokenSwapLayout",(function(){return c.TokenSwapLayout})),n.o(c,"TokenSwapLayoutLegacyV0")&&n.d(t,"TokenSwapLayoutLegacyV0",(function(){return c.TokenSwapLayoutLegacyV0})),n.o(c,"createInitSwapInstruction")&&n.d(t,"createInitSwapInstruction",(function(){return c.createInitSwapInstruction})),n.o(c,"depositInstruction")&&n.d(t,"depositInstruction",(function(){return c.depositInstruction})),n.o(c,"swapInstruction")&&n.d(t,"swapInstruction",(function(){return c.swapInstruction})),n.o(c,"withdrawInstruction")&&n.d(t,"withdrawInstruction",(function(){return c.withdrawInstruction}));var a=n(384);n.d(t,"TokenSwapLayout",(function(){return a.a})),n.d(t,"TokenSwapLayoutLegacyV0",(function(){return a.b})),n.d(t,"createInitSwapInstruction",(function(){return a.c})),n.d(t,"depositInstruction",(function(){return a.d})),n.d(t,"swapInstruction",(function(){return a.e})),n.d(t,"withdrawInstruction",(function(){return a.f}))},981:function(e,t,n){}},[[1059,1,2]]]);